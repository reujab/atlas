(()=>{var e={42:function(e){e.exports=(()=>{var e={944:function(e){e.exports=(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,s=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw s}}}}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r,o,i=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);s=!0);}catch(e){a=!0,o=e}finally{try{s||null==n.return||n.return()}finally{if(a)throw o}}return i}}(e,t)||i(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.d(t,{default:()=>c});var c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];a(this,e),this.allowExtra=t,this.defaults=new Map,this.types=new Map,this.optional=new Set,this.required=new Set}var t;return(t=[{key:"setDefaults",value:function(e){var t=this;return Object.entries(e).forEach((function(e){var n=o(e,2),r=n[0],i=n[1];return t.defaults.set(r,i)})),this}},{key:"setTypes",value:function(e){var t=this;return Object.entries(e).forEach((function(e){var n=o(e,2),r=n[0],i=n[1];return t.types.set(r,i)})),this}},{key:"setOptional",value:function(e){var t=this;return e.forEach((function(e){return t.optional.add(e)})),this}},{key:"setRequired",value:function(e){var t=this;return e.forEach((function(e){return t.required.add(e)})),this}},{key:"resolve",value:function(e){var t=Object.assign(this.getDefaults(),e);return this.validate(t),t}},{key:"getDefaults",value:function(){var e,t={},n=r(this.defaults);try{for(n.s();!(e=n.n()).done;){var i=o(e.value,2),s=i[0],a=i[1];t[s]=a}}catch(e){n.e(e)}finally{n.f()}return t}},{key:"validate",value:function(e){for(var t in e){if(!this.optionExists(t))throw new Error('Unkown option "'.concat(t,'".'));this.checkType(t,e[t])}var n,o=r(this.required.values());try{for(o.s();!(n=o.n()).done;){var i=n.value;if(void 0===e[i])throw new Error('Option "'.concat(i,'" is required.'))}}catch(e){o.e(e)}finally{o.f()}}},{key:"checkType",value:function(e,t){if(this.types.has(e)){var r=this.types.get(e),o=n(t);if(o!==r)throw new Error('Wrong value for option "'.concat(e,'". Expected type "').concat(r,'" but got "').concat(o,'".'))}}},{key:"optionExists",value:function(e){return!!this.allowExtra||this.defaults.has(e)||this.optional.has(e)||this.required.has(e)||this.types.has(e)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}();return t.default})()},162:function(e){e.exports=(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};e.d(t,{default:()=>n});var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._events={},this.on=this.addEventListener,this.off=this.removeEventListener}var t;return(t=[{key:"emit",value:function(e,t){if(Object.prototype.hasOwnProperty.call(this._events,e))for(var n=this._events[e],r={type:e,detail:t},o=n.length,i=0;i<o;i++)this.handle(n[i],r)}},{key:"handle",value:function(e,t){e(t)}},{key:"addEventListener",value:function(e,t){Object.prototype.hasOwnProperty.call(this._events,e)||(this._events[e]=[]),this._events[e].indexOf(t)<0&&this._events[e].push(t)}},{key:"removeEventListener",value:function(e,t){if(Object.prototype.hasOwnProperty.call(this._events,e)){var n=this._events[e],r=n.indexOf(t);r>=0&&n.splice(r,1),0===n.length&&delete this._events[e]}}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}();return t.default})()}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{"use strict";n.r(r),n.d(r,{GamepadHandler:()=>p,GamepadListener:()=>$});var e=n(162),t=n.n(e),o=n(944),i=n.n(o);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(p,e);var t,n,r,o,i,s=(o=p,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(o);if(i){var n=d(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return u(this,e)});function p(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a(this,p),(n=s.call(this)).index=e,n.options=n.constructor.resolveOptions(r),n.sticks=new Array(t.axes.length/2).fill(null).map((function(){return[null,null]})),n.buttons=new Array(t.buttons.length).fill(null),n.updateStick=n.updateStick.bind(f(n)),n.updateButton=n.updateButton.bind(f(n)),n}return t=p,r=[{key:"resolveOptions",value:function(e){var t=void 0!==e.stick,n=void 0!==e.button,r={stick:this.optionResolver.resolve(t?e.stick:n?{}:e),button:this.optionResolver.resolve(n?e.button:t?{}:e)};return r.stick.deadZone=Math.max(Math.min(r.stick.deadZone,1),0),r.button.deadZone=Math.max(Math.min(r.button.deadZone,1),0),r.stick.precision=r.stick.precision?Math.pow(10,r.stick.precision):0,r.button.precision=r.button.precision?Math.pow(10,r.button.precision):0,r}}],(n=[{key:"update",value:function(e){for(var t=0,n=this.sticks.length,r=0;r<n;r++)for(var o=0;o<2;o++)this.updateStick(e,r,o,e.axes[t++]);var i=this.buttons.length;for(t=0;t<i;t++)this.updateButton(e,e.buttons[t],t)}},{key:"updateStick",value:function(e,t,n,r){var o=this.options.stick,i=o.deadZone,s=o.analog,a=o.precision;i&&r<i&&r>-i&&(r=0),s?a&&(r=Math.round(r*a)/a):r=r>0?1:r<0?-1:0,this.sticks[t][n]!==r&&(this.sticks[t][n]=r,this.emit("axis",{gamepad:e,stick:t,axis:n,value:r,index:this.index}))}},{key:"updateButton",value:function(e,t,n){var r=this.options.button,o=r.deadZone,i=r.analog,s=r.precision,a=t.value,c=t.pressed,l=a;o&&t.value<o&&t.value>-o&&(l=0),i?s&&(l=Math.round(l*s)/s):l=c?1:0,this.buttons[n]!==l&&(this.buttons[n]=l,this.emit("button",{gamepad:e,button:n,pressed:c,value:l,index:this.index}))}}])&&c(t.prototype,n),r&&c(t,r),p}(t());p.optionResolver=(new(i())).setDefaults({analog:!0,deadZone:0,precision:0}).setTypes({analog:"boolean",deadZone:"number",precision:"number"});var h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.callback=t,this.frame=null,this.update=this.update.bind(this)}var t;return(t=[{key:"setCallback",value:function(e){this.callback=e}},{key:"start",value:function(){this.frame||(this.frame=window.requestAnimationFrame(this.update))}},{key:"stop",value:function(){this.frame&&(window.cancelAnimationFrame(this.frame),this.frame=null)}},{key:"update",value:function(){this.frame=window.requestAnimationFrame(this.update),this.callback()}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}();function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var $=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(i,e);var t,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=w(n);if(r){var o=w(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return v(this,e)});function i(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(g(this,i),e=o.call(this),"function"!=typeof navigator.getGamepads)throw new Error("This browser does not support gamepad API.");return e.options=t,e.onAxis=e.onAxis.bind(b(e)),e.update=e.update.bind(b(e)),e.start=e.start.bind(b(e)),e.stop=e.stop.bind(b(e)),e.discover=e.discover.bind(b(e)),e.onButton=e.onButton.bind(b(e)),e.handlers=new Array(4).fill(null),e.loop=new h(e.update),window.addEventListener("error",e.stop),e}return(t=[{key:"start",value:function(){this.loop.start()}},{key:"stop",value:function(){this.loop.stop()}},{key:"update",value:function(){var e=navigator.getGamepads();this.discover(e[0],0),this.discover(e[1],1),this.discover(e[2],2),this.discover(e[3],3)}},{key:"discover",value:function(e,t){e?(this.handlers[t]||this.registerHandler(t,e),this.handlers[t].update(e)):this.handlers[t]&&this.removeGamepad(t)}},{key:"registerHandler",value:function(e,t){if(this.handlers[e])throw new Error("Gamepad #".concat(e," is already registered."));var n=new p(e,t,this.options);this.handlers[e]=n,n.addEventListener("axis",this.onAxis),n.addEventListener("button",this.onButton),this.emit("gamepad:connected",{index:e,gamepad:t}),this.emit("gamepad:".concat(e,":connected"),{index:e,gamepad:t})}},{key:"removeGamepad",value:function(e){if(!this.handlers[e])throw new Error("Gamepad #".concat(e," is not registered."));this.handlers[e].removeEventListener("axis",this.onAxis),this.handlers[e].removeEventListener("button",this.onButton),this.handlers[e]=null,this.emit("gamepad:disconnected",{index:e}),this.emit("gamepad:".concat(e,":disconnected"),{index:e})}},{key:"onAxis",value:function(e){var t=e.detail.index;this.emit("gamepad:axis",e.detail),this.emit("gamepad:".concat(t,":axis"),e.detail),this.emit("gamepad:".concat(t,":axis:").concat(e.detail.axis),e.detail)}},{key:"onButton",value:function(e){var t=e.detail.index;this.emit("gamepad:button",e.detail),this.emit("gamepad:".concat(t,":button"),e.detail),this.emit("gamepad:".concat(t,":button:").concat(e.detail.button),e.detail)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(i.prototype,t),i}(t())})(),r})()},302:function(e,t,n){var r,o,i,s,a=[].slice;s=function(){var e,t,n,r,o,i,s,c,l,u,f,d,p,h,m;return l=function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},s=function(e,t){var n,r,o;for(o=[],n=-1,r=e.length;++n<r;)o=o.concat(t(e[n]));return o},h=function(e,t){var n,r,o;for(o="",n=-1,r=e.length;++n<r;)o+=t(e[n]);return o},p=function(e){return new RegExp(e.toString()+"|").exec("").length-1},f=function(e,t){var n,r,o,i,s;for(i={},n=-1,o=e.length;++n<o;)r=e[n],null!=(s=t[n])&&(null!=i[r]?(Array.isArray(i[r])||(i[r]=[i[r]]),i[r].push(s)):i[r]=s);return i},(e={}).Result=function(e,t){this.value=e,this.rest=t},e.Tagged=function(e,t){this.tag=e,this.value=t},e.tag=function(t,n){return function(r){var o,i;if(null!=(o=n(r)))return i=new e.Tagged(t,o.value),new e.Result(i,o.rest)}},e.regex=function(t){return function(n){var r,o;if(null!=(r=t.exec(n)))return o=r[0],new e.Result(o,n.slice(o.length))}},e.sequence=function(){var t;return t=1<=arguments.length?a.call(arguments,0):[],function(n){var r,o,i,s,a;for(r=-1,o=t.length,a=[],i=n;++r<o;){if(null==(s=(0,t[r])(i)))return;a.push(s.value),i=s.rest}return new e.Result(a,i)}},e.pick=function(){var t,n;return t=arguments[0],n=2<=arguments.length?a.call(arguments,1):[],function(r){var o,i;if(null!=(i=e.sequence.apply(e,n)(r)))return o=i.value,i.value=o[t],i}},e.string=function(t){var n;return n=t.length,function(r){if(r.slice(0,n)===t)return new e.Result(t,r.slice(n))}},e.lazy=function(e){var t;return t=null,function(n){return null==t&&(t=e()),t(n)}},e.baseMany=function(t,n,r,o,i){var s,a,c;for(a=i,c=r?"":[];(null==n||null==n(a))&&null!=(s=t(a));)r?c+=s.value:c.push(s.value),a=s.rest;if(!o||0!==c.length)return new e.Result(c,a)},e.many1=function(t){return function(n){return e.baseMany(t,null,!1,!0,n)}},e.concatMany1Till=function(t,n){return function(r){return e.baseMany(t,n,!0,!0,r)}},e.firstChoice=function(){var e;return e=1<=arguments.length?a.call(arguments,0):[],function(t){var n,r,o;for(n=-1,r=e.length;++n<r;)if(null!=(o=(0,e[n])(t)))return o}},d=function(t){var n;return(n={}).wildcard=e.tag("wildcard",e.string(t.wildcardChar)),n.optional=e.tag("optional",e.pick(1,e.string(t.optionalSegmentStartChar),e.lazy((function(){return n.pattern})),e.string(t.optionalSegmentEndChar))),n.name=e.regex(new RegExp("^["+t.segmentNameCharset+"]+")),n.named=e.tag("named",e.pick(1,e.string(t.segmentNameStartChar),e.lazy((function(){return n.name})))),n.escapedChar=e.pick(1,e.string(t.escapeChar),e.regex(/^./)),n.static=e.tag("static",e.concatMany1Till(e.firstChoice(e.lazy((function(){return n.escapedChar})),e.regex(/^./)),e.firstChoice(e.string(t.segmentNameStartChar),e.string(t.optionalSegmentStartChar),e.string(t.optionalSegmentEndChar),n.wildcard))),n.token=e.lazy((function(){return e.firstChoice(n.wildcard,n.optional,n.named,n.static)})),n.pattern=e.many1(e.lazy((function(){return n.token}))),n},c={escapeChar:"\\",segmentNameStartChar:":",segmentValueCharset:"a-zA-Z0-9-_~ %",segmentNameCharset:"a-zA-Z0-9",optionalSegmentStartChar:"(",optionalSegmentEndChar:")",wildcardChar:"*"},i=function(e,t){if(Array.isArray(e))return h(e,(function(e){return i(e,t)}));switch(e.tag){case"wildcard":return"(.*?)";case"named":return"(["+t+"]+)";case"static":return l(e.value);case"optional":return"(?:"+i(e.value,t)+")?"}},o=function(e,t){return null==t&&(t=c.segmentValueCharset),"^"+i(e,t)+"$"},r=function(e){if(Array.isArray(e))return s(e,r);switch(e.tag){case"wildcard":return["_"];case"named":return[e.value];case"static":return[];case"optional":return r(e.value)}},u=function(e,t,n,r){var o,i,s;if(null==r&&(r=!1),null!=(s=e[t])){if(!((o=n[t]||0)>(Array.isArray(s)?s.length-1:0)))return i=Array.isArray(s)?s[o]:s,r&&(n[t]=o+1),i;if(r)throw new Error("too few values provided for key `"+t+"`")}else if(r)throw new Error("no values provided for key `"+t+"`")},n=function(e,t,r){var o,i;if(Array.isArray(e)){for(o=-1,i=e.length;++o<i;)if(n(e[o],t,r))return!0;return!1}switch(e.tag){case"wildcard":return null!=u(t,"_",r,!1);case"named":return null!=u(t,e.value,r,!1);case"static":return!1;case"optional":return n(e.value,t,r)}},m=function(e,t,r){if(Array.isArray(e))return h(e,(function(e){return m(e,t,r)}));switch(e.tag){case"wildcard":return u(t,"_",r,!0);case"named":return u(t,e.value,r,!0);case"static":return e.value;case"optional":return n(e.value,t,r)?m(e.value,t,r):""}},(t=function(e,n){var i,s,a;if(e instanceof t)return this.isRegex=e.isRegex,this.regex=e.regex,this.ast=e.ast,void(this.names=e.names);if(this.isRegex=e instanceof RegExp,"string"!=typeof e&&!this.isRegex)throw new TypeError("argument must be a regex or a string");if(this.isRegex){if(this.regex=e,null!=n){if(!Array.isArray(n))throw new Error("if first argument is a regex the second argument may be an array of group names but you provided something else");if(i=p(this.regex),n.length!==i)throw new Error("regex contains "+i+" groups but array of group names contains "+n.length);this.names=n}}else{if(""===e)throw new Error("argument must not be the empty string");if(e.replace(/\s+/g,"")!==e)throw new Error("argument must not contain whitespace");if(s={escapeChar:(null!=n?n.escapeChar:void 0)||c.escapeChar,segmentNameStartChar:(null!=n?n.segmentNameStartChar:void 0)||c.segmentNameStartChar,segmentNameCharset:(null!=n?n.segmentNameCharset:void 0)||c.segmentNameCharset,segmentValueCharset:(null!=n?n.segmentValueCharset:void 0)||c.segmentValueCharset,optionalSegmentStartChar:(null!=n?n.optionalSegmentStartChar:void 0)||c.optionalSegmentStartChar,optionalSegmentEndChar:(null!=n?n.optionalSegmentEndChar:void 0)||c.optionalSegmentEndChar,wildcardChar:(null!=n?n.wildcardChar:void 0)||c.wildcardChar},null==(a=d(s).pattern(e)))throw new Error("couldn't parse pattern");if(""!==a.rest)throw new Error("could only partially parse pattern");this.ast=a.value,this.regex=new RegExp(o(this.ast,s.segmentValueCharset)),this.names=r(this.ast)}}).prototype.match=function(e){var t,n;return null==(n=this.regex.exec(e))?null:(t=n.slice(1),this.names?f(this.names,t):t)},t.prototype.stringify=function(e){if(null==e&&(e={}),this.isRegex)throw new Error("can't stringify patterns generated from a regex");if(e!==Object(e))throw new Error("argument must be an object or undefined");return m(this.ast,e,{})},t.escapeForRegex=l,t.concatMap=s,t.stringConcatMap=h,t.regexGroupCount=p,t.keysAndValuesToObject=f,t.P=e,t.newParser=d,t.defaultOptions=c,t.astNodeToRegexString=o,t.astNodeToNames=r,t.getParam=u,t.astNodeContainsSegmentsForProvidedParams=n,t.stringify=m,t},null!=n.amdO?(o=[],void 0===(i="function"==typeof(r=s)?r.apply(t,o):r)||(e.exports=i)):null!==t?e.exports=s():this.UrlPattern=s()},113:e=>{"use strict";e.exports=require("crypto")},147:e=>{"use strict";e.exports=require("fs")},808:e=>{"use strict";e.exports=require("net")},37:e=>{"use strict";e.exports=require("os")},781:e=>{"use strict";e.exports=require("stream")},404:e=>{"use strict";e.exports=require("tls")},855:e=>{let t=Buffer.allocUnsafe(256);const n="BCcDdEFfHPpQSX".split("").reduce(((e,n)=>{const o=n.charCodeAt(0);return e[n]=()=>(t[0]=o,r.i=5,r),e}),{}),r=Object.assign((function(){return r.i=0,r}),n,{N:String.fromCharCode(0),i:0,inc:e=>(r.i+=e,r),str(e){const n=Buffer.byteLength(e);return o(n),r.i+=t.write(e,r.i,n,"utf8"),r},i16:e=>(o(2),t.writeUInt16BE(e,r.i),r.i+=2,r),i32:(e,n)=>n||0===n?(t.writeUInt32BE(e,n),r):(o(4),t.writeUInt32BE(e,r.i),r.i+=4,r),z:e=>(o(e),t.fill(0,r.i,r.i+e),r.i+=e,r),raw:e=>(t=Buffer.concat([t.slice(0,r.i),e]),r.i=t.length,r),end(e=1){t.writeUInt32BE(r.i-e,e);const n=t.slice(0,r.i);return r.i=0,t=Buffer.allocUnsafe(256),n}});function o(e){if(t.length-r.i<e){const n=t,r=n.length;t=Buffer.allocUnsafe(r+(r>>1)+e),n.copy(t)}}e.exports=r},214:(e,t,n)=>{const r=n(808),o=n(404),i=n(113),s=n(781),{stringify:a,handleValue:c,arrayParser:l,arraySerializer:u}=n(330),{Errors:f}=n(875),d=n(355),p=n(218),{Query:h,CLOSE:m}=n(826),g=n(855);e.exports=function e(t,n={},{onopen:_=E,onend:B=E,onclose:j=E}={}){const{ssl:P,max:T,user:N,host:M,port:I,database:R,parsers:z,transform:F,onnotice:L,onnotify:U,onparameter:D,max_pipeline:q,keep_alive:H,backoff:G,target_session_attrs:V}=t,Z=p(),Y=y++,K={pid:null,secret:null},Q=C(qe,t.idle_timeout),W=C(qe,t.max_lifetime),X=C((function(){Ue(f.connection("CONNECT_TIMEOUT",t,ee)),ee.destroy()}),t.connect_timeout);let J,ee=null,te=new d,ne=Buffer.alloc(0),re=t.fetch_types,oe={},ie={},se=Math.random().toString(36).slice(2),ae=1,ce=0,le=0,ue=0,fe=0,de=0,pe=0,he=0,me=null,ge=null,ye=!1,ve=null,be=null,we=null,$e=null,xe=null,Ee=null,ke=null,_e=null,Se=null,Oe=null;const Ae={queue:n.closed,idleTimer:Q,connect(e){we=e,ze()},terminate:He,execute:Ce,cancel:async function({pid:e,secret:t},n,r){try{J=g().i32(16).i32(80877102).i32(e).i32(t).end(16),await Re(),ee.once("error",r),ee.once("close",n)}catch(e){r(e)}},end:qe,count:0,id:Y};return n.closed&&n.closed.push(Ae),Ae;function Ce(e){if(ye)return De(e,f.connection("CONNECTION_DESTROYED",t));if(!e.cancelled)try{return e.state=K,Se?Z.push(e):(Se=e,Se.active=!0),function(e){const n=[],r=[],o=a(e,e.strings[0],e.args[0],n,r,t);!e.tagged&&e.args.forEach((e=>c(e,n,r,t))),e.prepare=t.prepare&&(!("prepare"in e.options)||e.options.prepare),e.string=o,e.signature=e.prepare&&r+o,e.onlyDescribe&&delete ie[e.signature],e.parameters=e.parameters||n,e.prepared=e.prepare&&e.signature in ie,e.describeFirst=e.onlyDescribe||n.length&&!e.prepared,e.statement=e.prepared?ie[e.signature]:{string:o,types:r,name:e.prepare?se+ae++:""},"function"==typeof t.debug&&t.debug(Y,o,n,r)}(e),Pe(function(e){if(e.parameters.length>=65534)throw f.generic("MAX_PARAMETERS_EXCEEDED","Max number of parameters (65534) exceeded");return e.options.simple?g().Q().str(e.strings[0]+g.N).end():e.describeFirst?Buffer.concat([Be(e),b]):e.prepare?e.prepared?je(e):Buffer.concat([Be(e),je(e)]):function(e){return Buffer.concat([St(e.statement.string,e.parameters,e.statement.types),x,je(e)])}(e)}(e))&&!e.describeFirst&&Z.length<q&&(!e.options.onexecute||e.options.onexecute(Ae))}catch(e){return 0===Z.length&&Pe(v),Ue(e),!0}}function Be(e){return Buffer.concat([St(e.statement.string,e.parameters,e.statement.types,e.statement.name),Ot("S",e.statement.name)])}function je(e){return Buffer.concat([_t(e.parameters,e.statement.types,e.statement.name,e.cursorName),e.cursorFn?At("",e.cursorRows):$])}function Pe(e,t){return Ee=Ee?Buffer.concat([Ee,e]):Buffer.from(e),t||Ee.length>=1024?Te(t):(null===ge&&(ge=setImmediate(Te)),!0)}function Te(e){const t=ee.write(Ee,e);return null!==ge&&clearImmediate(ge),Ee=ge=null,t}async function Ne(){if(Pe(w),!await new Promise((e=>ee.once("data",(t=>e(83===t[0])))))&&"prefer"===P)return Fe();ee.removeAllListeners(),ee=o.connect({socket:ee,..."require"===P||"allow"===P||"prefer"===P?{rejectUnauthorized:!1}:"verify-full"===P?{}:"object"==typeof P?P:{}}),ee.on("secureConnect",Fe),ee.on("error",Le),ee.on("close",Ge),ee.on("drain",Me)}function Me(){!Se&&_(Ae)}function Ie(e){if(!(ve&&(ve.push(e),le-=e.length,le>=0)))for(ne=ve?Buffer.concat(ve,de-le):0===ne.length?e:Buffer.concat([ne,e],ne.length+e.length);ne.length>4;){if(de=ne.readUInt32BE(1),de>=ne.length){le=de-ne.length,ve=[ne];break}try{Ve(ne.slice(0,de+1))}catch(e){Se&&(Se.cursorFn||Se.describeFirst)&&Pe(v),Ue(e)}ne=ne.slice(de+1),le=0,ve=null}}async function Re(){if(ye=!1,oe={},ee||(ee=await async function(){let e;try{e=t.socket?await Promise.resolve(t.socket(t)):r.Socket()}catch(e){return void Le(e)}return e.on("error",Le),e.on("close",Ge),e.on("drain",Me),e}()),ee){if(X.start(),t.socket)return P?Ne():Fe();if(ee.on("connect",P?Ne:Fe),t.path)return ee.connect(t.path);ee.connect(I[ue],M[ue]),ue=(ue+1)%I.length}}function ze(){setTimeout(Re,ce?ce+pe-Number(process.hrtime.bigint()/1000000n):0)}function Fe(){try{ie={},re=t.fetch_types,se=Math.random().toString(36).slice(2),ae=1,W.start(),ee.on("data",Ie),H&&ee.setKeepAlive(!0,1e3*H),Pe(J||g().inc(4).i16(3).z(2).str(Object.entries(Object.assign({user:N,database:R,client_encoding:"UTF8"},t.connection)).filter((([,e])=>e)).map((([e,t])=>e+g.N+t)).join(g.N)).z(2).end(0))}catch(e){Le(e)}}function Le(e){if(Ae.queue!==n.connecting||!t.host[fe+1])for(Ue(e);Z.length;)De(Z.shift(),e)}function Ue(e){xe&&(xe.destroy(e),xe=null),Se&&De(Se,e),we&&(De(we,e),we=null)}function De(e,n){e.reject(Object.create(n,{stack:{value:n.stack+e.origin.replace(/.*\n/,"\n"),enumerable:t.debug},query:{value:e.string,enumerable:t.debug},parameters:{value:e.parameters,enumerable:t.debug},args:{value:e.args,enumerable:t.debug},types:{value:e.statement&&e.statement.types,enumerable:t.debug}}))}function qe(){return $e||(!Ae.reserved&&B(Ae),Ae.reserved||we||Se||0!==Z.length?$e=new Promise((e=>ke=e)):(He(),new Promise((e=>ee&&"closed"!==ee.readyState?ee.once("close",e):e()))))}function He(){ye=!0,(xe||Se||we||Z.length)&&Le(f.connection("CONNECTION_DESTROYED",t)),clearImmediate(ge),ee&&(ee.removeListener("data",Ie),ee.removeListener("connect",Fe),"open"===ee.readyState&&ee.end(g().X().end())),ke&&(ke(),$e=ke=null)}async function Ge(e){if(ne=Buffer.alloc(0),le=0,ve=null,clearImmediate(ge),ee.removeListener("data",Ie),ee.removeListener("connect",Fe),Q.cancel(),W.cancel(),X.cancel(),ee.encrypted&&(ee.removeAllListeners(),ee=null),we)return ze();!e&&(Se||Z.length)&&Le(f.connection("CONNECTION_CLOSED",t,ee)),ce=Number(process.hrtime.bigint()/1000000n),e&&t.shared.retries++,pe=1e3*("function"==typeof G?G(t.shared.retries):G),j(Ae)}function Ve(e,t=e[0]){(68===t?Ze:100===t?yt:65===t?ft:83===t?Ye:90===t?Ke:67===t?Qe:50===t?Xe:49===t?We:116===t?Je:84===t?et:82===t?tt:110===t?ct:75===t?lt:69===t?ut:115===t?dt:51===t?pt:71===t?ht:78===t?bt:72===t?mt:99===t?vt:73===t?wt:86===t?$t:118===t?xt:87===t?gt:Et)(e)}function Ze(e){let t,n,r,o=7;const i=Se.isRaw?new Array(Se.statement.columns.length):{};for(let s=0;s<Se.statement.columns.length;s++)n=Se.statement.columns[s],t=e.readInt32BE(o),o+=4,r=-1===t?null:!0===Se.isRaw?e.slice(o,o+=t):void 0===n.parser?e.toString("utf8",o,o+=t):!0===n.parser.array?n.parser(e.toString("utf8",o+1,o+=t)):n.parser(e.toString("utf8",o,o+=t)),Se.isRaw?i[s]=!0===Se.isRaw?r:F.value.from?F.value.from(r):r:i[n.name]=F.value.from?F.value.from(r):r;Se.forEachFn?Se.forEachFn(F.row.from?F.row.from(i):i,te):te[he++]=F.row.from?F.row.from(i):i}function Ye(e){const[n,r]=e.toString("utf8",5,e.length-1).split(g.N);oe[n]=r,t.parameters[n]!==r&&(t.parameters[n]=r,D&&D(n,r))}function Ke(n){if(Se&&Se.options.simple&&Se.resolve(be||te),Se=be=null,te=new d,X.cancel(),we){if(V){if(!oe.in_hot_standby||!oe.default_transaction_read_only)return function(){const e=new h(["\n      show transaction_read_only;\n      select pg_catalog.pg_is_in_recovery()\n    "],[],Ce,null,{simple:!0});e.resolve=([[e],[t]])=>{oe.default_transaction_read_only=e.transaction_read_only,oe.in_hot_standby=t.pg_is_in_recovery?"on":"off"},e.execute()}();if(function(e,n){return"read-write"===e&&"on"===n.default_transaction_read_only||"read-only"===e&&"off"===n.default_transaction_read_only||"primary"===e&&"off"===n.in_hot_standby||"standby"===e&&"on"===n.in_hot_standby||"prefer-standby"===e&&"off"===n.in_hot_standby&&t.host[fe]}(V,oe))return He()}return re?async function(){re=!1,(await new h(["\n      select b.oid, b.typarray\n      from pg_catalog.pg_type a\n      left join pg_catalog.pg_type b on b.oid = a.typelem\n      where a.typcategory = 'A'\n      group by b.oid, b.typarray\n      order by b.oid\n    "],[],Ce)).forEach((({oid:e,typarray:n})=>function(e,n){const r=t.parsers[e];t.shared.typeArrayMap[e]=n,t.parsers[n]=e=>l(e,r),t.parsers[n].array=!0,t.serializers[n]=n=>u(n,t.serializers[e],t)}(e,n)))}():(Ce(we),void(t.shared.retries=fe=we=0))}for(;Z.length&&(Se=Z.shift())&&(Se.active=!0,Se.cancelled);)e(t).cancel(Se.state,Se.cancelled.resolve,Se.cancelled.reject);Se||(Ae.reserved?73===n[5]?$e?He():(Ae.reserved=null,_(Ae)):Ae.reserved():$e?He():_(Ae))}function Qe(e){he=0;for(let t=e.length-1;t>0;t--)if(32===e[t]&&e[t+1]<58&&null===te.count&&(te.count=+e.toString("utf8",t+1,e.length-1)),e[t-1]>=65){te.command=e.toString("utf8",5,t),te.state=K;break}return Oe&&(Oe(),Oe=null),"BEGIN"!==te.command||1===T||Ae.reserved?Se.options.simple?Xe():(Se.cursorFn&&(te.count&&Se.cursorFn(te),Pe(v)),void Se.resolve(te)):Ue(f.generic("UNSAFE_TRANSACTION","Only use sql.begin or max: 1"))}function We(){Se.parsing=!1}function Xe(){!te.statement&&(te.statement=Se.statement),te.columns=Se.statement.columns}function Je(e){const t=e.readUInt16BE(5);for(let n=0;n<t;++n)!Se.statement.types[n]&&(Se.statement.types[n]=e.readUInt32BE(7+4*n));Se.prepare&&(ie[Se.signature]=Se.statement),Se.describeFirst&&!Se.onlyDescribe&&(Pe(je(Se)),Se.describeFirst=!1)}function et(e){te.command&&(be=be||[te],be.push(te=new d),te.count=null,Se.statement.columns=null);const t=e.readUInt16BE(5);let n,r=7;Se.statement.columns=Array(t);for(let o=0;o<t;++o){for(n=r;0!==e[r++];);const t=e.readUInt32BE(r+6);Se.statement.columns[o]={name:F.column.from?F.column.from(e.toString("utf8",n,r-1)):e.toString("utf8",n,r-1),parser:z[t],type:t},r+=18}if(te.statement=Se.statement,Se.onlyDescribe)return Se.resolve(Se.statement),Pe(v)}async function tt(e,t=e.readUInt32BE(5)){(3===t?nt:5===t?rt:10===t?ot:11===t?it:12===t?st:0!==t?kt:E)(e,t)}async function nt(){Pe(g().p().str(await at()).z(1).end())}async function rt(e){Pe(g().p().str("md5"+O(Buffer.concat([Buffer.from(O(await at()+N)),e.slice(9)]))).z(1).end())}function ot(){g().p().str("SCRAM-SHA-256"+g.N);const e=g.i;_e=i.randomBytes(18).toString("base64"),Pe(g.inc(4).str("n,,n=*,r="+_e).i32(g.i-e-4,e).end())}async function it(e){const t=e.toString("utf8",9).split(",").reduce(((e,t)=>(e[t[0]]=t.slice(2),e)),{}),n=i.pbkdf2Sync(await at(),Buffer.from(t.s,"base64"),parseInt(t.i),32,"sha256"),r=A(n,"Client Key"),o="n=*,r="+_e+",r="+t.r+",s="+t.s+",i="+t.i+",c=biws,r="+t.r;me=A(A(n,"Server Key"),o).toString("base64"),Pe(g().p().str("c=biws,r="+t.r+",p="+function(e,t){const n=Math.max(e.length,t.length),r=Buffer.allocUnsafe(n);for(let o=0;o<n;o++)r[o]=e[o]^t[o];return r}(r,A(function(e){return i.createHash("sha256").update(e).digest()}(r),o)).toString("base64")).end())}function st(e){e.toString("utf8",9).split(g.N,1)[0].slice(2)!==me&&(Ue(f.generic("SASL_SIGNATURE_MISMATCH","The server did not return the correct signature")),ee.destroy())}function at(){return Promise.resolve("function"==typeof t.pass?t.pass():t.pass)}function ct(){if(te.statement=Se.statement,te.statement.columns=[],Se.onlyDescribe)return Se.resolve(Se.statement),Pe(v)}function lt(e){K.pid=e.readUInt32BE(5),K.secret=e.readUInt32BE(9)}function ut(e){Se&&(Se.cursorFn||Se.describeFirst)&&Pe(v);const t=f.postgres(S(e));Se&&Se.retried?Ue(Se.retried):Se&&k.has(t.routine)?function(e,t){delete ie[e.signature],e.retried=t,Ce(e)}(Se,t):Ue(t)}function ft(e){if(!U)return;let t=9;for(;0!==e[t++];);U(e.toString("utf8",9,t-1),e.toString("utf8",t,e.length-1))}async function dt(){try{const e=await Promise.resolve(Se.cursorFn(te));he=0,e===m?Pe(function(e=""){return Buffer.concat([g().C().str("P").str(e+g.N).end(),g().S().end()])}(Se.portal)):(te=new d,Pe(At("",Se.cursorRows)))}catch(e){Pe(v),Se.reject(e)}}function pt(){te.count&&Se.cursorFn(te),Se.resolve(te)}function ht(){xe=new s.Writable({autoDestroy:!0,write(e,t,n){ee.write(g().d().raw(e).end(),n)},destroy(e,t){t(e),ee.write(g().f().str(e+g.N).end()),xe=null},final(e){ee.write(g().c().end()),Oe=e}}),Se.resolve(xe)}function mt(){xe=new s.Readable({read(){ee.resume()}}),Se.resolve(xe)}function gt(){xe=new s.Duplex({autoDestroy:!0,read(){ee.resume()},write(e,t,n){ee.write(g().d().raw(e).end(),n)},destroy(e,t){t(e),ee.write(g().f().str(e+g.N).end()),xe=null},final(e){ee.write(g().c().end()),Oe=e}}),Se.resolve(xe)}function yt(e){xe.push(e.slice(5))||ee.pause()}function vt(){xe.push(null),xe=null}function bt(e){L?L(S(e)):console.log(S(e))}function wt(){}function $t(){Ue(f.notSupported("FunctionCallResponse"))}function xt(){Ue(f.notSupported("NegotiateProtocolVersion"))}function Et(e){console.error("Postgres.js : Unknown Message:",e[0])}function kt(e,t){console.error("Postgres.js : Unknown Auth:",t)}function _t(e,n,r="",o=""){let i,s;return g().B().str(o+g.N).str(r+g.N).i16(0).i16(e.length),e.forEach(((r,o)=>{if(null===r)return g.i32(4294967295);s=n[o],e[o]=r=s in t.serializers?t.serializers[s](r):""+r,i=g.i,g.inc(4).str(r).i32(g.i-i-4,i)})),g.i16(0),g.end()}function St(e,t,n,r=""){return g().P().str(r+g.N).str(e+g.N).i16(t.length),t.forEach(((e,t)=>g.i32(n[t]||0))),g.end()}function Ot(e,t=""){return g().D().str(e).str(t+g.N).end()}function At(e="",t=0){return Buffer.concat([g().E().str(e+g.N).i32(t).end(),b])}};let y=1;const v=g().S().end(),b=g().H().end(),w=g().i32(8).i32(80877103).end(8),$=Buffer.concat([g().E().str(g.N).i32(0).end(),v]),x=g().D().str("S").str(g.N).end(),E=()=>{},k=new Set(["FetchPreparedStatement","RevalidateCachedQuery","transformAssignedExpr"]),_={83:"severity_local",86:"severity",67:"code",77:"message",68:"detail",72:"hint",80:"position",112:"internal_position",113:"internal_query",87:"where",115:"schema_name",116:"table_name",99:"column_name",100:"data type_name",110:"constraint_name",70:"file",76:"line",82:"routine"};function S(e){const t={};let n=5;for(let r=5;r<e.length-1;r++)0===e[r]&&(t[_[e[n]]]=e.toString("utf8",n+1,r),n=r+1);return t}function O(e){return i.createHash("md5").update(e).digest("hex")}function A(e,t){return i.createHmac("sha256",e).update(t).digest()}function C(e,t){if(!(t="function"==typeof t?t():t))return{cancel:E,start:E};let n;return{cancel(){n&&(clearTimeout(n),n=null)},start(){n&&clearTimeout(n),n=setTimeout(r,1e3*t,arguments)}};function r(t){e.apply(null,t),n=null}}},875:e=>{const t=e.exports.PostgresError=class extends Error{constructor(e){super(e.message),this.name=this.constructor.name,Object.assign(this,e)}};e.exports.Errors={connection:function e(t,n,r){const{host:o,port:i}=r||n,s=Object.assign(new Error("write "+t+" "+(n.path||o+":"+i)),{code:t,errno:t,address:n.path||o},n.path?{}:{port:i});return Error.captureStackTrace(s,e),s},postgres:function e(n){const r=new t(n);return Error.captureStackTrace(r,e),r},generic:function e(t,n){const r=Object.assign(new Error(t+": "+n),{code:t});return Error.captureStackTrace(r,e),r},notSupported:function e(t){const n=Object.assign(new Error(t+" (B) is not supported"),{code:"MESSAGE_NOT_SUPPORTED",name:t});return Error.captureStackTrace(n,e),n}}},785:(e,t,n)=>{const r=n(37),o=n(147),{mergeUserTypes:i,inferType:s,Parameter:a,Identifier:c,Builder:l,toPascal:u,toCamel:f,toKebab:d,fromPascal:p,fromCamel:h,fromKebab:m}=n(330),g=n(214),{Query:y,CLOSE:v}=n(826),b=n(218),{Errors:w,PostgresError:$}=n(875),x=n(505),E=n(278);function k(e,t){const n=function(e,t){if(e&&e.shared)return e;const n=process.env,o=("string"==typeof e?t:e)||{},{url:s,multihost:a}=function(e){if("string"!=typeof e)return{url:{searchParams:new Map}};let t=e;return t=t.slice(t.indexOf("://")+3).split(/[?/]/)[0],t=decodeURIComponent(t.slice(t.indexOf("@")+1)),{url:new URL(e.replace(t,t.split(",")[0])),multihost:t.indexOf(",")>-1&&t}}(e),c=[...s.searchParams].reduce(((e,[t,n])=>(e[t]=n,e)),{}),l=o.hostname||o.host||a||s.hostname||n.PGHOST||"localhost",u=o.port||s.port||n.PGPORT||5432,f=o.user||o.username||s.username||n.PGUSERNAME||n.PGUSER||function(){try{return r.userInfo().username}catch(e){return process.env.USERNAME||process.env.USER||process.env.LOGNAME}}();o.no_prepare&&(o.prepare=!1),c.sslmode&&(c.ssl=c.sslmode,delete c.sslmode),"timeout"in o&&(console.log("The timeout option is deprecated, use idle_timeout instead"),o.idle_timeout=o.timeout);const d={max:10,ssl:!1,idle_timeout:null,connect_timeout:30,max_lifetime:O,max_pipeline:100,backoff:S,keep_alive:60,prepare:!0,debug:!1,fetch_types:!0,publications:"alltables",target_session_attrs:null};return{host:Array.isArray(l)?l:l.split(",").map((e=>e.split(":")[0])),port:Array.isArray(u)?u:l.split(",").map((e=>parseInt(e.split(":")[1]||u))),path:o.path||l.indexOf("/")>-1&&l+"/.s.PGSQL."+u,database:o.database||o.db||(s.pathname||"").slice(1)||n.PGDATABASE||f,user:f,pass:o.pass||o.password||s.password||n.PGPASSWORD||"",...Object.entries(d).reduce(((e,[t,r])=>(e[t]=t in o?o[t]:t in c?"disable"!==c[t]&&"false"!==c[t]&&c[t]:n["PG"+t.toUpperCase()]||r,e)),{}),connection:{application_name:"postgres.js",...o.connection,...Object.entries(c).reduce(((e,[t,n])=>(t in d||(e[t]=n),e)),{})},types:o.types||{},target_session_attrs:_(o,s,n),onnotice:o.onnotice,onnotify:o.onnotify,onclose:o.onclose,onparameter:o.onparameter,socket:o.socket,transform:(p=o.transform||{undefined:void 0},{undefined:p.undefined,column:{from:"function"==typeof p.column?p.column:p.column&&p.column.from,to:p.column&&p.column.to},value:{from:"function"==typeof p.value?p.value:p.value&&p.value.from,to:p.value&&p.value.to},row:{from:"function"==typeof p.row?p.row:p.row&&p.row.from,to:p.row&&p.row.to}}),parameters:{},shared:{retries:0,typeArrayMap:{}},...i(o.types)};var p}(e,t),u=n.no_subscribe||x(k,{...n});let f=!1;const d=b(),p=b(),h=b(),m=b(),A=b(),C=b(),B=b(),j=b(),P={connecting:p,reserved:h,closed:m,ended:A,open:C,busy:B,full:j},T=[...Array(n.max)].map((()=>g(n,P,{onopen:G,onend:H,onclose:V}))),N=M((function(e){return f?e.reject(w.connection("CONNECTION_ENDED",n,n)):C.length?L(C.shift(),e):m.length?q(m.shift(),e):void(B.length?L(B.shift(),e):d.push(e))}));return Object.assign(N,{get parameters(){return n.parameters},largeObject:E.bind(null,N),subscribe:u,CLOSE:v,END:v,PostgresError:$,options:n,listen:I,notify:async function(e,t){return await(N`select pg_notify(${e}, ${""+t})`)},begin:async function(e,t){!t&&(t=e,e="");const n=b();let r,o=0;try{return await N.unsafe("begin "+e.replace(/[^a-z ]/gi,""),[],{onexecute:function(e){r=e,R(e,h),e.reserved=()=>n.length?e.execute(n.shift()):R(e,h)}}).execute(),await async function e(t,r,i){const s=M((function(e){e.catch((e=>a||(a=e))),t.queue===j?n.push(e):t.execute(e)||R(t,j)}));let a,c;s.savepoint=function n(r,i){return r&&Array.isArray(r.raw)?n((e=>e.apply(e,arguments))):(1===arguments.length&&(i=r,r=null),e(t,i,"s"+o+++(r?"_"+r:"")))},i&&await(s`savepoint ${s(i)}`);try{if(c=await new Promise(((e,t)=>{const n=r(s);Promise.resolve(Array.isArray(n)?Promise.all(n):n).then(e,t)})),a)throw a}catch(e){throw await(i?s`rollback to ${s(i)}`:s`rollback`),e instanceof $&&"25P02"===e.code&&a||e}return!i&&await(s`commit`),c}(r,t)}catch(e){throw e}},close:async function(){await Promise.all(T.map((e=>e.end())))},end:async function({timeout:e=null}={}){if(f)return f;let t;return await 1,f=Promise.race([new Promise((n=>null!==e&&(t=setTimeout(D,1e3*e,n)))),Promise.all(T.map((e=>e.end())).concat(I.sql?I.sql.end({timeout:0}):[],u.sql?u.sql.end({timeout:0}):[]))]).then((()=>clearTimeout(t)))}}),N;function M(e,t){return e.debug=n.debug,Object.entries(n.types).reduce(((e,[t,n])=>(e[t]=e=>new a(e,n.to),e)),r),Object.assign(i,{types:r,typed:r,unsafe:function(n,r=[],o={}){2===arguments.length&&!Array.isArray(r)&&(o=r,r=[]);const i=new y([n],r,e,U,{prepare:!1,...o,simple:"simple"in o?o.simple:0===r.length});return t&&i.execute(),i},array:F,json:z,file:function(n,r=[],i={}){2===arguments.length&&!Array.isArray(r)&&(i=r,r=[]);const s=new y([],r,(t=>{o.readFile(n,"utf8",((n,r)=>{if(n)return t.reject(n);t.strings=[r],e(t)}))}),U,{...i,simple:"simple"in i?i.simple:0===r.length});return t&&s.execute(),s}}),i;function r(e,t){return new a(e,t)}function i(r,...o){const i=r&&Array.isArray(r.raw)?new y(r,o,e,U):"string"!=typeof r||o.length?new l(r,o):new c(n.transform.column.to?n.transform.column.to(r):r);return t&&i instanceof y&&i.execute(),i}}async function I(e,t,r){const o={fn:t,onlisten:r},i=I.sql||(I.sql=k({...n,max:1,idle_timeout:null,max_lifetime:null,fetch_types:!1,onclose(){Object.entries(I.channels).forEach((([e,{listeners:t}])=>{delete I.channels[e],Promise.all(t.map((t=>I(e,t.fn,t.onlisten).catch((()=>{})))))}))},onnotify(e,t){e in I.channels&&I.channels[e].listeners.forEach((e=>e.fn(t)))}})),s=I.channels||(I.channels={}),a=e in s,c=a?s[e]:s[e]={listeners:[o]};return a?(c.listeners.push(o),o.onlisten&&o.onlisten(),Promise.resolve({...c.result,unlisten:l})):(c.result=await(i`listen ${i(e)}`),o.onlisten&&o.onlisten(),c.result.unlisten=l,c.result);async function l(){if(e in s!=0&&(c.listeners=c.listeners.filter((e=>e!==o)),!s[e].listeners.length))return delete s[e],i`unlisten ${i(e)}`}}function R(e,t){e.queue.remove(e),t.push(e),e.queue=t,t===C?e.idleTimer.start():e.idleTimer.cancel()}function z(e){return new a(e,3802)}function F(e,t){return Array.isArray(e)?new a(e,t||(e.length?s(e)||25:0),n.shared.typeArrayMap):F(Array.from(arguments))}function L(e,t){return e.execute(t)?R(e,B):R(e,j)}function U(e){return new Promise(((t,r)=>{e.state?e.active?g(n).cancel(e.state,t,r):e.cancelled={resolve:t,reject:r}:(d.remove(e),e.cancelled=!0,e.reject(w.generic("57014","canceling statement due to user request")),t())}))}async function D(e){for(await Promise.all(T.map((e=>e.terminate())));d.length;)d.shift().reject(w.connection("CONNECTION_DESTROYED",n));e()}function q(e,t){R(e,p),e.connect(t)}function H(e){R(e,A)}function G(e){if(0===d.length)return R(e,C);let t=Math.ceil(d.length/(p.length+1)),n=!0;for(;n&&d.length&&t-- >0;)n=e.execute(d.shift());R(e,n?B:j)}function V(e){R(e,m),e.reserved=null,n.onclose&&n.onclose(e.id),d.length&&q(e,d.shift())}}function _(e,t,n){const r=e.target_session_attrs||t.searchParams.get("target_session_attrs")||n.PGTARGETSESSIONATTRS;if(!r||["read-write","read-only","primary","standby","prefer-standby"].includes(r))return r;throw new Error("target_session_attrs "+r+" is not supported")}function S(e){return(.5+Math.random()/2)*Math.min(3**e/100,20)}function O(){return 60*(30+30*Math.random())}Object.assign(k,{PostgresError:$,toPascal:u,toCamel:f,toKebab:d,fromPascal:p,fromCamel:h,fromKebab:m,BigInt:{to:20,from:[20],parse:e=>BigInt(e),serialize:e=>e.toString()}}),e.exports=k},278:(e,t,n)=>{const r=n(781);e.exports=function(e,t,n=393216){return new Promise((async(o,i)=>{await e.begin((async e=>{let i;!t&&([{oid:t}]=await(e`select lo_creat(-1) as oid`));const[{fd:s}]=await(e`select lo_open(${t}, ${n}) as fd`),a={writable:async function({highWaterMark:e=16384,start:t=0}={}){return t&&await a.seek(t),new r.Writable({highWaterMark:e,write(e,t,n){a.write(e).then((()=>n()),n)}})},readable:async function({highWaterMark:e=16384,start:t=0,end:n=1/0}={}){let o=n-t;return t&&await a.seek(t),new r.Readable({highWaterMark:e,async read(e){const t=e>o?e-o:e;o-=e;const[{data:n}]=await a.read(t);this.push(n),n.length<e&&this.push(null)}})},close:()=>e`select lo_close(${s})`.then(i),tell:()=>e`select lo_tell64(${s})`,read:t=>e`select loread(${s}, ${t}) as data`,write:t=>e`select lowrite(${s}, ${t})`,truncate:t=>e`select lo_truncate64(${s}, ${t})`,seek:(t,n=0)=>e`select lo_lseek64(${s}, ${t}, ${n})`,size:()=>e`
          select
            lo_lseek64(${s}, location, 0) as position,
            seek.size
          from (
            select
              lo_lseek64($1, 0, 2) as size,
              tell.location
            from (select lo_tell64($1) as location) tell
          ) seek
        `};return o(a),new Promise((async e=>i=e))})).catch(i)}))}},826:e=>{const t=new Map,n=new Map,r=Symbol("OriginError"),o=e.exports.CLOSE={};e.exports.Query=class extends Promise{constructor(e,n,o,i,s={}){let a,c;super(((e,t)=>{a=e,c=t})),this.tagged=Array.isArray(e.raw),this.strings=e,this.args=n,this.handler=o,this.canceller=i,this.options=s,this.state=null,this.statement=null,this.resolve=e=>(this.active=!1,a(e)),this.reject=e=>(this.active=!1,c(e)),this.active=!1,this.cancelled=null,this.executed=!1,this.signature="",this[r]=this.handler.debug?new Error:this.tagged&&function(e){if(t.has(e))return t.get(e);const n=Error.stackTraceLimit;return Error.stackTraceLimit=4,t.set(e,new Error),Error.stackTraceLimit=n,t.get(e)}(this.strings)}get origin(){return this.handler.debug?this[r].stack:this.tagged?n.has(this.strings)?n.get(this.strings):n.set(this.strings,this[r].stack).get(this.strings):""}static get[Symbol.species](){return Promise}cancel(){return this.canceller&&(this.canceller(this),this.canceller=null)}async readable(){return this.options.simple=!0,this.options.prepare=!1,this.streaming=!0,this}async writable(){return this.options.simple=!0,this.options.prepare=!1,this.streaming=!0,this}cursor(e=1,t){if(this.options.simple=!1,"function"==typeof e&&(t=e,e=1),this.cursorRows=e,"function"==typeof t)return this.cursorFn=t,this;let n;return{[Symbol.asyncIterator]:()=>({next:()=>{if(this.executed&&!this.active)return{done:!0};n&&n();const e=new Promise(((e,t)=>{this.cursorFn=t=>(e({value:t,done:!1}),new Promise((e=>n=e))),this.resolve=()=>(this.active=!1,e({done:!0})),this.reject=e=>(this.active=!1,t(e))}));return this.execute(),e},return:()=>(n&&n(o),{done:!0})})}}describe(){return this.onlyDescribe=!0,this}stream(){throw new Error(".stream has been renamed to .forEach")}forEach(e){return this.forEachFn=e,this.handle(),this}raw(){return this.isRaw=!0,this}values(){return this.isRaw="values",this}async handle(){!this.executed&&(this.executed=!0)&&await 1&&this.handler(this)}execute(){return this.handle(),this}then(){return this.handle(),super.then.apply(this,arguments)}catch(){return this.handle(),super.catch.apply(this,arguments)}finally(){return this.handle(),super.finally.apply(this,arguments)}}},218:e=>{e.exports=function(e=[]){let t=e.slice(),n=0;return{get length(){return t.length-n},remove:e=>{const n=t.indexOf(e);return-1===n?null:(t.splice(n,1),e)},push:e=>(t.push(e),e),shift:()=>{const e=t[n++];return n===t.length?(n=0,t=[]):t[n-1]=void 0,e}}}},355:e=>{e.exports=class extends Array{constructor(){super(),Object.defineProperties(this,{count:{value:null,writable:!0},state:{value:null,writable:!0},command:{value:null,writable:!0},columns:{value:null,writable:!0},statement:{value:null,writable:!0}})}static get[Symbol.species](){return Array}}},505:e=>{const t=()=>{};function n(e,t,n,r){let o,i;for(let s=0;s<n.length;s++)o=e[r++],i=n[s],t[i.name]=110===o?null:117===o?void 0:void 0===i.parser?e.toString("utf8",r+4,r+=4+e.readUInt32BE(r)):!0===i.parser.array?i.parser(e.toString("utf8",r+5,r+=4+e.readUInt32BE(r))):i.parser(e.toString("utf8",r+4,r+=4+e.readUInt32BE(r)));return r}e.exports=function(e,r){const o=new Map,i="postgresjs_"+Math.random().toString(36).slice(2),s={};let a,c,l=!1;const u=p.sql=e({...r,max:1,fetch_types:!1,idle_timeout:null,max_lifetime:null,connection:{...r.connection,replication:"database"},onclose:async function(){l||(c=null,s.pid=s.secret=void 0,h(await m(u,i,r.publications)),o.forEach((e=>e.forEach((({onsubscribe:e})=>e())))))},no_subscribe:!0}),f=u.end,d=u.close;return u.end=async()=>(l=!0,c&&await new Promise((e=>(c.once("end",e),c.end()))),f()),u.close=async()=>(c&&await new Promise((e=>(c.once("end",e),c.end()))),d()),p;async function p(e,n,c=t){e=function(e){const t=e.match(/^(\*|insert|update|delete)?:?([^.]+?\.?[^=]+)?=?(.+)?/i)||[];if(!t)throw new Error("Malformed subscribe pattern: "+e);const[,n,r,o]=t;return(n||"*")+(r?":"+(-1===r.indexOf(".")?"public."+r:r):"")+(o?"="+o:"")}(e),a||(a=m(u,i,r.publications));const l={fn:n,onsubscribe:c},f=o.has(e)?o.get(e).add(l):o.set(e,new Set([l])).get(e),d=()=>{f.delete(l),0===f.size&&o.delete(e)};return a.then((e=>(h(e),c(),{unsubscribe:d,state:s,sql:u})))}function h(e){c=e.stream,s.pid=e.state.pid,s.secret=e.state.secret}async function m(e,t,r){if(!r)throw new Error("Missing publication names");const o=await e.unsafe(`CREATE_REPLICATION_SLOT ${t} TEMPORARY LOGICAL pgoutput NOEXPORT_SNAPSHOT`),[i]=o,s=await e.unsafe(`START_REPLICATION SLOT ${t} LOGICAL ${i.consistent_point} (proto_version '1', publication_names '${r}')`).writable(),a={lsn:Buffer.concat(i.consistent_point.split("/").map((e=>Buffer.from(("00000000"+e).slice(-8),"hex"))))};return s.on("data",(function(t){119===t[0]?function(e,t,r,o){Object.entries({R:e=>{let n=1;const o=t[e.readUInt32BE(n)]={schema:String(e.slice(n+=4,n=e.indexOf(0,n)))||"pg_catalog",table:String(e.slice(n+1,n=e.indexOf(0,n+1))),columns:Array(e.readUInt16BE(n+=2)),keys:[]};n+=2;let i,s=0;for(;n<e.length;)i=o.columns[s++]={key:e[n++],name:String(e.slice(n,n=e.indexOf(0,n))),type:e.readUInt32BE(n+=1),parser:r[e.readUInt32BE(n)],atttypmod:e.readUInt32BE(n+=4)},i.key&&o.keys.push(i),n+=4},Y:()=>{},O:()=>{},B:e=>{t.date=function(e){return new Date(Date.UTC(2e3,0,1)+Number(e/BigInt(1e3)))}(e.readBigInt64BE(9)),t.lsn=e.slice(1,9)},I:e=>{let r=1;const i=t[e.readUInt32BE(r)],s={};n(e,s,i.columns,r+=7),o(s,{command:"insert",relation:i})},D:e=>{let r=1;const i=t[e.readUInt32BE(r)];r+=4;const s=75===e[r],a=s||79===e[r]?{}:null;n(e,a,s?i.keys:i.columns,r+=3),o(a,{command:"delete",relation:i,key:s})},U:e=>{let r=1;const i=t[e.readUInt32BE(r)];r+=4;const s=75===e[r],a=s||79===e[r]?{}:null;a&&(r=n(e,a,s?i.keys:i.columns,r+=3));const c={};n(e,c,i.columns,r+3),o(c,{command:"update",relation:i,key:s,old:a})},T:()=>{},C:()=>{}}).reduce(((e,[t,n])=>(e[t.charCodeAt(0)]=n,e)),{})[e[0]](e)}(t.slice(25),a,e.options.parsers,c):107===t[0]&&t[17]&&function(){const e=Buffer.alloc(34);e[0]="r".charCodeAt(0),e.fill(a.lsn,1),e.writeBigInt64BE(BigInt(Date.now()-Date.UTC(2e3,0,1))*BigInt(1e3),25),s.write(e)}()})),s.on("error",e.close),s.on("close",e.close),{stream:s,state:o.state};function c(e,t){const n=t.relation.schema+"."+t.relation.table;g("*",e,t),g("*:"+n,e,t),t.relation.keys.length&&g("*:"+n+"="+t.relation.keys.map((t=>e[t.name])),e,t),g(t.command,e,t),g(t.command+":"+n,e,t),t.relation.keys.length&&g(t.command+":"+n+"="+t.relation.keys.map((t=>e[t.name])),e,t)}}function g(e,t,n){o.has(e)&&o.get(e).forEach((({fn:r})=>r(t,n,e)))}}},330:(e,t,n)=>{const{Query:r}=n(826),{Errors:o}=n(875),i=e.exports.types={string:{to:25,from:null,serialize:e=>""+e},number:{to:0,from:[21,23,26,700,701],serialize:e=>""+e,parse:e=>+e},json:{to:114,from:[114,3802],serialize:e=>JSON.stringify(e),parse:e=>JSON.parse(e)},boolean:{to:16,from:16,serialize:e=>!0===e?"t":"f",parse:e=>"t"===e},date:{to:1184,from:[1082,1114,1184],serialize:e=>(e instanceof Date?e:new Date(e)).toISOString(),parse:e=>new Date(e)},bytea:{to:17,from:17,serialize:e=>"\\x"+Buffer.from(e).toString("hex"),parse:e=>Buffer.from(e.slice(2),"hex")}};class s{then(){b()}catch(){b()}finally(){b()}}const a=e.exports.Identifier=class extends s{constructor(e){super(),this.value=k(e)}},c=e.exports.Parameter=class extends s{constructor(e,t,n){super(),this.value=e,this.type=t,this.array=n}},l=e.exports.Builder=class extends s{constructor(e,t){super(),this.first=e,this.rest=t}build(e,t,n,r){const o=v.map((([t,n])=>({fn:n,i:e.search(t)}))).sort(((e,t)=>e.i-t.i)).pop();if(-1===o.i)throw new Error("Could not infer helper mode");return o.fn(this.first,this.rest,t,n,r)}};function u(e,t,n,r){let i=e instanceof c?e.value:e;if(void 0===i&&(e instanceof c?e.value=r.transform.undefined:i=e=r.transform.undefined,void 0===i))throw o.generic("UNDEFINED_VALUE","Undefined values are not allowed");return"$"+n.push(e instanceof c?(t.push(e.value),e.array?e.array[e.type||_(e.value)]||e.type||x(e.value):e.type):(t.push(e),_(e)))}e.exports.handleValue=u;const f=E(i);function d(e,t,n,r,o,i){for(let s=1;s<e.strings.length;s++)t+=p(t,n,r,o,i)+e.strings[s],n=e.args[s];return t}function p(e,t,n,o,i){return t instanceof l?t.build(e,n,o,i):t instanceof r?h(t,n,o,i):t instanceof a?t.value:t&&t[0]instanceof r?t.reduce(((e,t)=>e+" "+h(t,n,o,i)),""):u(t,n,o,i)}function h(e,t,n,r){return e.fragment=!0,d(e,e.strings[0],e.args[0],t,n,r)}function m(e,t,n,r,o){return e.map((e=>"("+r.map((r=>p("values",e[r],t,n,o))).join(",")+")")).join(",")}function g(e,t,n,r,o){const i=Array.isArray(e[0]);return m(i?e:[e],n,r,t.length?t.flat():Object.keys(i?e[0]:e),o)}function y(e,t,n,o,i){if("string"==typeof e&&(e=[e].concat(t)),Array.isArray(e))return e.map((e=>k(i.transform.column.to?i.transform.column.to(e):e))).join(",");let s;return(t.length?t.flat():Object.keys(e)).map((t=>(s=e[t],(s instanceof r?h(s,n,o,i):s instanceof a?s.value:u(s,n,o,i))+" as "+k(i.transform.column.to?i.transform.column.to(t):t)))).join(",")}e.exports.stringify=d;const v=Object.entries({values:g,in:g,select:y,as:y,returning:y,update:(e,t,n,r,o)=>(t.length?t.flat():Object.keys(e)).map((t=>k(o.transform.column.to?o.transform.column.to(t):t)+"="+u(e[t],n,r,o))),insert(e,t,n,r,o){const i=t.length?t.flat():Object.keys(Array.isArray(e)?e[0]:e);return"("+i.map((e=>k(o.transform.column.to?o.transform.column.to(e):e))).join(",")+")values"+m(Array.isArray(e)?e:[e],n,r,i,o)}}).map((([e,t])=>[new RegExp("((?:^|[\\s(])"+e+"(?:$|[\\s(]))(?![\\s\\S]*\\1)","i"),t]));function b(){throw o.generic("NOT_TAGGED_CALL","Query not called as a tagged template literal")}const w=e.exports.serializers=f.serializers,$=e.exports.parsers=f.parsers;function x(e){return Array.isArray(e)?x(e[0]):"string"==typeof e?1009:0}function E(e){return Object.keys(e).reduce(((t,n)=>(e[n].from&&[].concat(e[n].from).forEach((r=>t.parsers[r]=e[n].parse)),t.serializers[e[n].to]=e[n].serialize,e[n].from&&[].concat(e[n].from).forEach((r=>t.serializers[r]=e[n].serialize)),t)),{parsers:{},serializers:{}})}e.exports.END={},e.exports.mergeUserTypes=function(e){const t=E(e||{});return{serializers:Object.assign({},w,t.serializers),parsers:Object.assign({},$,t.parsers)}};const k=e.exports.escapeIdentifier=function(e){return'"'+e.replace(/"/g,'""').replace(/\./g,'"."')+'"'},_=e.exports.inferType=function e(t){return t instanceof c?t.type:t instanceof Date?1184:t instanceof Uint8Array?17:!0===t||!1===t?16:"bigint"==typeof t?20:Array.isArray(t)?e(t[0]):0},S=/\\/g,O=/"/g;e.exports.arraySerializer=function e(t,n,r){if(!1===Array.isArray(t))return t;if(!t.length)return"{}";const i=t[0];return Array.isArray(i)&&!i.type?"{"+t.map((t=>e(t,n))).join(",")+"}":"{"+t.map((e=>{if(void 0===e&&void 0===(e=r.transform.undefined))throw o.generic("UNDEFINED_VALUE","Undefined values are not allowed");return null===e?"null":'"'+function(e){return e.replace(S,"\\\\").replace(O,'\\"')}(n?n(e.type?e.value:e):""+e)+'"'})).join(",")+"}"};const A={i:0,char:null,str:"",quoted:!1,last:0};function C(e,t,n){const r=[];for(;e.i<t.length;e.i++){if(e.char=t[e.i],e.quoted)"\\"===e.char?e.str+=t[++e.i]:'"'===e.char?(r.push(n?n(e.str):e.str),e.str="",e.quoted='"'===t[e.i+1],e.last=e.i+2):e.str+=e.char;else if('"'===e.char)e.quoted=!0;else if("{"===e.char)e.last=++e.i,r.push(C(e,t,n));else{if("}"===e.char){e.quoted=!1,e.last<e.i&&r.push(n?n(t.slice(e.last,e.i)):t.slice(e.last,e.i)),e.last=e.i+1;break}","===e.char&&"}"!==e.p&&'"'!==e.p&&(r.push(n?n(t.slice(e.last,e.i)):t.slice(e.last,e.i)),e.last=e.i+1)}e.p=e.char}return e.last<e.i&&r.push(n?n(t.slice(e.last,e.i+1)):t.slice(e.last,e.i+1)),r}e.exports.arrayParser=function(e,t){return A.i=A.last=0,C(A,e,t)},e.exports.toCamel=e=>{let t=e[0];for(let n=1;n<e.length;n++)t+="_"===e[n]?e[++n].toUpperCase():e[n];return t},e.exports.toPascal=e=>{let t=e[0].toUpperCase();for(let n=1;n<e.length;n++)t+="_"===e[n]?e[++n].toUpperCase():e[n];return t},e.exports.toKebab=e=>e.replace(/_/g,"-"),e.exports.fromCamel=e=>e.replace(/([A-Z])/g,"_$1").toLowerCase(),e.exports.fromPascal=e=>(e.slice(0,1)+e.slice(1).replace(/([A-Z])/g,"_$1")).toLowerCase(),e.exports.fromKebab=e=>e.replace(/-/g,"_")}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.amdO={},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=n(785)({database:"pi-es",username:"reujab"});let t,r;!async function(){const t=await(e`SELECT id::bigint, name FROM genres`);for(const e of t)i[e.id]=e.name}(),s(),a();const o={},i={};async function s(){if(!t){t=await(e`
			SELECT id::bigint, title, array_to_string(genres, ',') as genres, overview, released::text FROM movies
			ORDER BY popularity DESC NULLS LAST
			LIMIT 100
		`);for(const e of t)e.genres=e.genres?.split(",").map(Number),o[e.id]=e}return t}async function a(){if(!r){r=await(e`
			SELECT id::bigint, title, array_to_string(genres, ',') as genres, overview, released::text FROM movies
			WHERE votes >= 1000
			ORDER BY score DESC NULLS LAST
			LIMIT 100
		`);for(const e of r)e.genres=e.genres?.split(",").map(Number),o[e.id]=e}return r}function c(){}function l(e,t){for(const n in t)e[n]=t[n];return e}function u(e){return e()}function f(){return Object.create(null)}function d(e){e.forEach(u)}function p(e){return"function"==typeof e}function h(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let m;function g(e,t){return m||(m=document.createElement("a")),m.href=t,e===m.href}function y(e){return 0===Object.keys(e).length}function v(e,...t){if(null==e)return c;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function b(e,t,n){e.$$.on_destroy.push(v(t,n))}function w(e,t,n,r){return e[1]&&r?l(n.ctx.slice(),e[1](r(t))):n.ctx}function $(e){const t={};for(const n in e)"$"!==n[0]&&(t[n]=e[n]);return t}new Set;let x,E=!1;function k(e,t){e.appendChild(t)}function _(e,t,n){const r=function(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}(e);if(!r.getElementById(t)){const e=C("style");e.id=t,e.textContent=n,function(e,t){k(e.head||e,t)}(r,e)}}function S(e,t,n){e.insertBefore(t,n||null)}function O(e){e.parentNode.removeChild(e)}function A(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function C(e){return document.createElement(e)}function B(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function j(e){return document.createTextNode(e)}function P(){return j(" ")}function T(){return j("")}function N(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function M(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function I(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function R(e,t,n,r){null===n?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function z(e,t,n){e.classList[n?"add":"remove"](t)}function F(e){x=e}function L(e){(function(){if(!x)throw new Error("Function called outside component initialization");return x})().$$.on_destroy.push(e)}new Map;const U=[],D=[],q=[],H=[],G=Promise.resolve();let V=!1;function Z(){V||(V=!0,G.then(W))}function Y(e){q.push(e)}const K=new Set;let Q=0;function W(){const e=x;do{for(;Q<U.length;){const e=U[Q];Q++,F(e),X(e.$$)}for(F(null),U.length=0,Q=0;D.length;)D.pop()();for(let e=0;e<q.length;e+=1){const t=q[e];K.has(t)||(K.add(t),t())}q.length=0}while(U.length);for(;H.length;)H.pop()();V=!1,K.clear(),F(e)}function X(e){if(null!==e.fragment){e.update(),d(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Y)}}const J=new Set;let ee,te;function ne(){ee={r:0,c:[],p:ee}}function re(){ee.r||d(ee.c),ee=ee.p}function oe(e,t){e&&e.i&&(J.delete(e),e.i(t))}function ie(e,t,n,r){if(e&&e.o){if(J.has(e))return;J.add(e),ee.c.push((()=>{J.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}else r&&r()}function se(e,t){const n={},r={},o={$$scope:1};let i=e.length;for(;i--;){const s=e[i],a=t[i];if(a){for(const e in s)e in a||(r[e]=1);for(const e in a)o[e]||(n[e]=a[e],o[e]=1);e[i]=a}else for(const e in s)o[e]=1}for(const e in r)e in n||(n[e]=void 0);return n}function ae(e){return"object"==typeof e&&null!==e?e:{}}function ce(e){e&&e.c()}function le(e,t,n,r){const{fragment:o,on_mount:i,on_destroy:s,after_update:a}=e.$$;o&&o.m(t,n),r||Y((()=>{const t=i.map(u).filter(p);s?s.push(...t):d(t),e.$$.on_mount=[]})),a.forEach(Y)}function ue(e,t){const n=e.$$;null!==n.fragment&&(d(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function fe(e,t,n,r,o,i,s,a=[-1]){const l=x;F(e);const u=e.$$={fragment:null,ctx:null,props:i,update:c,not_equal:o,bound:f(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:f(),dirty:a,skip_bound:!1,root:t.target||l.$$.root};s&&s(u.root);let p=!1;if(u.ctx=n?n(e,t.props||{},((t,n,...r)=>{const i=r.length?r[0]:n;return u.ctx&&o(u.ctx[t],u.ctx[t]=i)&&(!u.skip_bound&&u.bound[t]&&u.bound[t](i),p&&function(e,t){-1===e.$$.dirty[0]&&(U.push(e),Z(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(e,t)),n})):[],u.update(),p=!0,d(u.before_update),u.fragment=!!r&&r(u.ctx),t.target){if(t.hydrate){E=!0;const e=(h=t.target,Array.from(h.childNodes));u.fragment&&u.fragment.l(e),e.forEach(O)}else u.fragment&&u.fragment.c();t.intro&&oe(e.$$.fragment),le(e,t.target,t.anchor,t.customElement),E=!1,W()}var h;F(l)}"undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global,new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]),"function"==typeof HTMLElement&&(te=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:e}=this.$$;this.$$.on_disconnect=e.map(u).filter(p);for(const e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(e,t,n){this[e]=n}disconnectedCallback(){d(this.$$.on_disconnect)}$destroy(){ue(this,1),this.$destroy=c}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){this.$$set&&!y(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}});class de{$destroy(){ue(this,1),this.$destroy=c}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){this.$$set&&!y(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function pe(e){_(e,"svelte-1xe5udy",".tile.active.svelte-1xe5udy,.tile.svelte-1xe5udy:hover{border:0.5rem solid black;padding:0}")}function he(e){let t,n,r,o,i,s,a,c,l,u,f,d,p=e[0].title+"";var h=e[0].icon;return h&&(r=new h({})),{c(){t=C("a"),n=C("div"),r&&ce(r.$$.fragment),i=P(),s=C("div"),a=P(),c=C("div"),l=j(p),M(n,"class",o="p-2 w-40 h-40 flex justify-center items-center "+e[0].iconClass+" svelte-1xe5udy"),M(s,"class","grow"),M(c,"class","text-5xl"),M(t,"href",u="#"+e[0].path),M(t,"class",f="tile w-64 h-64 bg-white shrink-0 items-center flex flex-col p-2 rounded-xl drop-shadow-xl "+(e[1]?"active":"")+" svelte-1xe5udy")},m(e,o){S(e,t,o),k(t,n),r&&le(r,n,null),k(t,i),k(t,s),k(t,a),k(t,c),k(c,l),d=!0},p(e,[i]){if(h!==(h=e[0].icon)){if(r){ne();const e=r;ie(e.$$.fragment,1,0,(()=>{ue(e,1)})),re()}h?(r=new h({}),ce(r.$$.fragment),oe(r.$$.fragment,1),le(r,n,null)):r=null}(!d||1&i&&o!==(o="p-2 w-40 h-40 flex justify-center items-center "+e[0].iconClass+" svelte-1xe5udy"))&&M(n,"class",o),(!d||1&i)&&p!==(p=e[0].title+"")&&I(l,p),(!d||1&i&&u!==(u="#"+e[0].path))&&M(t,"href",u),(!d||2&i&&f!==(f="tile w-64 h-64 bg-white shrink-0 items-center flex flex-col p-2 rounded-xl drop-shadow-xl "+(e[1]?"active":"")+" svelte-1xe5udy"))&&M(t,"class",f)},i(e){d||(r&&oe(r.$$.fragment,e),d=!0)},o(e){r&&ie(r.$$.fragment,e),d=!1},d(e){e&&O(t),r&&ue(r)}}}function me(e,t,n){let{tile:r,active:o}=t;return e.$$set=e=>{"tile"in e&&n(0,r=e.tile),"active"in e&&n(1,o=e.active)},[r,o]}const ge=class extends de{constructor(e){super(),fe(this,e,me,he,h,{tile:0,active:1},pe)}};function ye(e){_(e,"svelte-c8tyih","svg.svelte-c8tyih{stroke:currentColor;fill:currentColor;stroke-width:0;width:100%;height:auto;max-height:100%}")}function ve(e){let t,n;return{c(){t=B("title"),n=j(e[0])},m(e,r){S(e,t,r),k(t,n)},p(e,t){1&t&&I(n,e[0])},d(e){e&&O(t)}}}function be(e){let t,n,r,o=e[0]&&ve(e);const i=e[3].default,s=function(e,t,n,r){if(e){const r=w(e,t,n,null);return e[0](r)}}(i,e,e[2]);return{c(){t=B("svg"),o&&o.c(),n=T(),s&&s.c(),M(t,"xmlns","http://www.w3.org/2000/svg"),M(t,"viewBox",e[1]),M(t,"class","svelte-c8tyih")},m(e,i){S(e,t,i),o&&o.m(t,null),k(t,n),s&&s.m(t,null),r=!0},p(e,[a]){e[0]?o?o.p(e,a):(o=ve(e),o.c(),o.m(t,n)):o&&(o.d(1),o=null),s&&s.p&&(!r||4&a)&&function(e,t,n,r,o,i){if(o){const s=w(t,n,r,i);e.p(s,o)}}(s,i,e,e[2],r?function(e,t,n,r){if(e[2]&&r){const o=e[2](r(n));if(void 0===t.dirty)return o;if("object"==typeof o){const e=[],n=Math.max(t.dirty.length,o.length);for(let r=0;r<n;r+=1)e[r]=t.dirty[r]|o[r];return e}return t.dirty|o}return t.dirty}(i,e[2],a,null):function(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}(e[2]),null),(!r||2&a)&&M(t,"viewBox",e[1])},i(e){r||(oe(s,e),r=!0)},o(e){ie(s,e),r=!1},d(e){e&&O(t),o&&o.d(),s&&s.d(e)}}}function we(e,t,n){let{$$slots:r={},$$scope:o}=t,{title:i=null}=t,{viewBox:s}=t;return e.$$set=e=>{"title"in e&&n(0,i=e.title),"viewBox"in e&&n(1,s=e.viewBox),"$$scope"in e&&n(2,o=e.$$scope)},[i,s,o,r]}const $e=class extends de{constructor(e){super(),fe(this,e,we,be,h,{title:0,viewBox:1},ye)}};function xe(e){let t;return{c(){t=B("path"),M(t,"d","M488 64h-8v20c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12V64H96v20c0 6.6-5.4 12-12 12H44c-6.6 0-12-5.4-12-12V64h-8C10.7 64 0 74.7 0 88v336c0 13.3 10.7 24 24 24h8v-20c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v20h320v-20c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v20h8c13.3 0 24-10.7 24-24V88c0-13.3-10.7-24-24-24zM96 372c0 6.6-5.4 12-12 12H44c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm0-96c0 6.6-5.4 12-12 12H44c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm0-96c0 6.6-5.4 12-12 12H44c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm272 208c0 6.6-5.4 12-12 12H156c-6.6 0-12-5.4-12-12v-96c0-6.6 5.4-12 12-12h200c6.6 0 12 5.4 12 12v96zm0-168c0 6.6-5.4 12-12 12H156c-6.6 0-12-5.4-12-12v-96c0-6.6 5.4-12 12-12h200c6.6 0 12 5.4 12 12v96zm112 152c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm0-96c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm0-96c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40z")},m(e,n){S(e,t,n)},p:c,d(e){e&&O(t)}}}function Ee(e){let t,n;const r=[{viewBox:"0 0 512 512"},e[0]];let o={$$slots:{default:[xe]},$$scope:{ctx:e}};for(let e=0;e<r.length;e+=1)o=l(o,r[e]);return t=new $e({props:o}),{c(){ce(t.$$.fragment)},m(e,r){le(t,e,r),n=!0},p(e,[n]){const o=1&n?se(r,[r[0],ae(e[0])]):{};2&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(oe(t.$$.fragment,e),n=!0)},o(e){ie(t.$$.fragment,e),n=!1},d(e){ue(t,e)}}}function ke(e,t,n){return e.$$set=e=>{n(0,t=l(l({},t),$(e)))},[t=$(t)]}const _e=class extends de{constructor(e){super(),fe(this,e,ke,Ee,h,{})}};function Se(e){let t;return{c(){t=B("path"),M(t,"d","M592 0H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h245.1v32h-160c-17.7 0-32 14.3-32 32s14.3 32 32 32h384c17.7 0 32-14.3 32-32s-14.3-32-32-32h-160v-32H592c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm-16 352H64V64h512v288z")},m(e,n){S(e,t,n)},p:c,d(e){e&&O(t)}}}function Oe(e){let t,n;const r=[{viewBox:"0 0 640 512"},e[0]];let o={$$slots:{default:[Se]},$$scope:{ctx:e}};for(let e=0;e<r.length;e+=1)o=l(o,r[e]);return t=new $e({props:o}),{c(){ce(t.$$.fragment)},m(e,r){le(t,e,r),n=!0},p(e,[n]){const o=1&n?se(r,[r[0],ae(e[0])]):{};2&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(oe(t.$$.fragment,e),n=!0)},o(e){ie(t.$$.fragment,e),n=!1},d(e){ue(t,e)}}}function Ae(e,t,n){return e.$$set=e=>{n(0,t=l(l({},t),$(e)))},[t=$(t)]}const Ce=class extends de{constructor(e){super(),fe(this,e,Ae,Oe,h,{})}},Be=new(n(42).GamepadListener),je=[];function Pe(e){for(const t of je)t(e)}function Te(e){je.push(e)}function Ne(e){const t=je.indexOf(e);if(-1===t)throw new Error("cannot unsubscribe: handler not found");je.splice(t,1)}function Me(e,t,n){const r=e.slice();return r[7]=t[n],r[9]=n,r}function Ie(e){let t,n;return t=new ge({props:{tile:e[7],active:e[0]===e[9]}}),{c(){ce(t.$$.fragment)},m(e,r){le(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.active=e[0]===e[9]),t.$set(r)},i(e){n||(oe(t.$$.fragment,e),n=!0)},o(e){ie(t.$$.fragment,e),n=!1},d(e){ue(t,e)}}}function Re(e){let t,n,r,o=e[2],i=[];for(let t=0;t<o.length;t+=1)i[t]=Ie(Me(e,o,t));const s=e=>ie(i[e],1,1,(()=>{i[e]=null}));return{c(){t=C("div"),n=C("div");for(let e=0;e<i.length;e+=1)i[e].c();M(n,"class","flex flex-col gap-48 flex-wrap h-[44rem]"),M(t,"class","h-screen px-48 rounded-[25px] bg-cover flex items-center"),R(t,"background-image",e[1])},m(e,o){S(e,t,o),k(t,n);for(let e=0;e<i.length;e+=1)i[e].m(n,null);r=!0},p(e,[t]){if(5&t){let r;for(o=e[2],r=0;r<o.length;r+=1){const s=Me(e,o,r);i[r]?(i[r].p(s,t),oe(i[r],1)):(i[r]=Ie(s),i[r].c(),oe(i[r],1),i[r].m(n,null))}for(ne(),r=o.length;r<i.length;r+=1)s(r);re()}},i(e){if(!r){for(let e=0;e<o.length;e+=1)oe(i[e]);r=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)ie(i[e]);r=!1},d(e){e&&O(t),A(i,e)}}}function ze(e,t,n){const r=(new Date).getHours(),o=r>=7&&r<=17?"day":"night",i=`url(./backgrounds/${o}/${Math.floor(Math.random()*("day"===o?4:23))}.webp)`,s=[{title:"Movies",path:"/movies",icon:_e,iconClass:"text-indigo-700"},{title:"TV Shows",path:"/shows",icon:Ce,iconClass:"text-lime-700"}];let a=0;function c(e){switch(e){case"A":location.hash=`#${s[a].path}`;break;case"up":a%2==1&&n(0,a-=1);break;case"down":a%2==0&&n(0,a+=1);break;case"left":a>=2&&n(0,a-=2);break;case"right":a+2<s.length&&n(0,a+=2)}n(0,a=Math.max(0,Math.min(s.length-1,a)))}return Te(c),L((()=>{Ne(c)})),[a,i,s]}Be.start(),Be.on("gamepad:axis",(e=>{e=e.detail,console.log(e),0!==e.value&&0===e.stick&&(0===e.axis&&e.value<0?Pe("left"):0===e.axis&&e.value>0?Pe("right"):1===e.axis&&e.value<0?Pe("up"):1===e.axis&&e.value>0&&Pe("down"))})),Be.on("gamepad:button",(e=>{if(e.detail.pressed)switch(console.log(e.detail.button),e.detail.button){case 0:Pe("A");break;case 1:Pe("B");break;case 2:Pe("X");break;case 3:Pe("Y");break;case 12:Pe("up");break;case 13:Pe("down");break;case 14:Pe("left");break;case 15:Pe("right")}}));function Fe(e){_(e,"svelte-a20dss",".button.active.svelte-a20dss,.button.svelte-a20dss:hover{border-color:black}")}function Le(e){let t,n,r,o,i,s;var a=e[1];return a&&(r=new a({})),{c(){t=C("div"),n=C("div"),r&&ce(r.$$.fragment),o=P(),i=j(e[0]),M(n,"class","w-12 h-12 mr-8"),M(t,"class","button p-16 h-16 flex items-center cursor-pointer text-5xl font-light border rounded-full drop-shadow-md bg-white svelte-a20dss"),z(t,"active",e[2])},m(e,a){S(e,t,a),k(t,n),r&&le(r,n,null),k(t,o),k(t,i),s=!0},p(e,[o]){if(a!==(a=e[1])){if(r){ne();const e=r;ie(e.$$.fragment,1,0,(()=>{ue(e,1)})),re()}a?(r=new a({}),ce(r.$$.fragment),oe(r.$$.fragment,1),le(r,n,null)):r=null}(!s||1&o)&&I(i,e[0]),4&o&&z(t,"active",e[2])},i(e){s||(r&&oe(r.$$.fragment,e),s=!0)},o(e){r&&ie(r.$$.fragment,e),s=!1},d(e){e&&O(t),r&&ue(r)}}}function Ue(e,t,n){let{text:r,icon:o,active:i}=t;return e.$$set=e=>{"text"in e&&n(0,r=e.text),"icon"in e&&n(1,o=e.icon),"active"in e&&n(2,i=e.active)},[r,o,i]}const De=class extends de{constructor(e){super(),fe(this,e,Ue,Le,h,{text:0,icon:1,active:2},Fe)}};function qe(e){let t;return{c(){t=B("path"),M(t,"d","M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z")},m(e,n){S(e,t,n)},p:c,d(e){e&&O(t)}}}function He(e){let t,n;const r=[{viewBox:"0 0 512 512"},e[0]];let o={$$slots:{default:[qe]},$$scope:{ctx:e}};for(let e=0;e<r.length;e+=1)o=l(o,r[e]);return t=new $e({props:o}),{c(){ce(t.$$.fragment)},m(e,r){le(t,e,r),n=!0},p(e,[n]){const o=1&n?se(r,[r[0],ae(e[0])]):{};2&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(oe(t.$$.fragment,e),n=!0)},o(e){ie(t.$$.fragment,e),n=!1},d(e){ue(t,e)}}}function Ge(e,t,n){return e.$$set=e=>{n(0,t=l(l({},t),$(e)))},[t=$(t)]}const Ve=class extends de{constructor(e){super(),fe(this,e,Ge,He,h,{})}};function Ze(e){let t;return{c(){t=B("path"),M(t,"d","M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z")},m(e,n){S(e,t,n)},p:c,d(e){e&&O(t)}}}function Ye(e){let t,n;const r=[{viewBox:"0 0 448 512"},e[0]];let o={$$slots:{default:[Ze]},$$scope:{ctx:e}};for(let e=0;e<r.length;e+=1)o=l(o,r[e]);return t=new $e({props:o}),{c(){ce(t.$$.fragment)},m(e,r){le(t,e,r),n=!0},p(e,[n]){const o=1&n?se(r,[r[0],ae(e[0])]):{};2&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(oe(t.$$.fragment,e),n=!0)},o(e){ie(t.$$.fragment,e),n=!1},d(e){ue(t,e)}}}function Ke(e,t,n){return e.$$set=e=>{n(0,t=l(l({},t),$(e)))},[t=$(t)]}const Qe=class extends de{constructor(e){super(),fe(this,e,Ke,Ye,h,{})}};function We(e){let t;return{c(){t=B("path"),M(t,"d","M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z")},m(e,n){S(e,t,n)},p:c,d(e){e&&O(t)}}}function Xe(e){let t,n;const r=[{viewBox:"0 0 448 512"},e[0]];let o={$$slots:{default:[We]},$$scope:{ctx:e}};for(let e=0;e<r.length;e+=1)o=l(o,r[e]);return t=new $e({props:o}),{c(){ce(t.$$.fragment)},m(e,r){le(t,e,r),n=!0},p(e,[n]){const o=1&n?se(r,[r[0],ae(e[0])]):{};2&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(oe(t.$$.fragment,e),n=!0)},o(e){ie(t.$$.fragment,e),n=!1},d(e){ue(t,e)}}}function Je(e,t,n){return e.$$set=e=>{n(0,t=l(l({},t),$(e)))},[t=$(t)]}const et=class extends de{constructor(e){super(),fe(this,e,Je,Xe,h,{})}};function tt(e){let t;return{c(){t=B("path"),M(t,"d","M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z")},m(e,n){S(e,t,n)},p:c,d(e){e&&O(t)}}}function nt(e){let t,n;const r=[{viewBox:"0 0 448 512"},e[0]];let o={$$slots:{default:[tt]},$$scope:{ctx:e}};for(let e=0;e<r.length;e+=1)o=l(o,r[e]);return t=new $e({props:o}),{c(){ce(t.$$.fragment)},m(e,r){le(t,e,r),n=!0},p(e,[n]){const o=1&n?se(r,[r[0],ae(e[0])]):{};2&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(oe(t.$$.fragment,e),n=!0)},o(e){ie(t.$$.fragment,e),n=!1},d(e){ue(t,e)}}}function rt(e,t,n){return e.$$set=e=>{n(0,t=l(l({},t),$(e)))},[t=$(t)]}const ot=class extends de{constructor(e){super(),fe(this,e,rt,nt,h,{})}};function it(e){let t;return{c(){t=B("path"),M(t,"d","M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z")},m(e,n){S(e,t,n)},p:c,d(e){e&&O(t)}}}function st(e){let t,n;const r=[{viewBox:"0 0 512 512"},e[0]];let o={$$slots:{default:[it]},$$scope:{ctx:e}};for(let e=0;e<r.length;e+=1)o=l(o,r[e]);return t=new $e({props:o}),{c(){ce(t.$$.fragment)},m(e,r){le(t,e,r),n=!0},p(e,[n]){const o=1&n?se(r,[r[0],ae(e[0])]):{};2&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(oe(t.$$.fragment,e),n=!0)},o(e){ie(t.$$.fragment,e),n=!1},d(e){ue(t,e)}}}function at(e,t,n){return e.$$set=e=>{n(0,t=l(l({},t),$(e)))},[t=$(t)]}const ct=class extends de{constructor(e){super(),fe(this,e,at,st,h,{})}};function lt(e){_(e,"svelte-1e4jsv0",".icon.svelte-1e4jsv0{border:4px solid transparent;border-radius:0.5rem}.icon.svelte-1e4jsv0:hover{border-color:black}")}function ut(e){let t,n,r,o,i,s;return r=new ot({}),{c(){t=C("div"),n=C("div"),ce(r.$$.fragment),M(n,"class","w-16 h-16 drop-shadow-md p-1 content-box"),M(t,"class","icon mr-6 cursor-pointer svelte-1e4jsv0")},m(e,a){S(e,t,a),k(t,n),le(r,n,null),o=!0,i||(s=N(n,"click",history.back.bind(history)),i=!0)},p:c,i(e){o||(oe(r.$$.fragment,e),o=!0)},o(e){ie(r.$$.fragment,e),o=!1},d(e){e&&O(t),ue(r),i=!1,s()}}}function ft(e){let t,n,r,o;return n=new ct({}),{c(){t=C("a"),ce(n.$$.fragment),M(t,"href",r="#"+e[2]),M(t,"class","w-16 h-16 mr-6 drop-shadow-md icon p-1 content-box svelte-1e4jsv0")},m(e,r){S(e,t,r),le(n,t,null),o=!0},p(e,n){(!o||4&n&&r!==(r="#"+e[2]))&&M(t,"href",r)},i(e){o||(oe(n.$$.fragment,e),o=!0)},o(e){ie(n.$$.fragment,e),o=!1},d(e){e&&O(t),ue(n)}}}function dt(e){let t,n,r,o,i,s,a,c=e[1]&&ut(),l=e[2]&&ft(e);return{c(){t=C("h1"),c&&c.c(),n=P(),r=j(e[0]),o=P(),i=C("div"),s=P(),l&&l.c(),M(i,"class","grow"),M(t,"class","text-8xl font-light pt-10 flex items-center mb-2")},m(e,u){S(e,t,u),c&&c.m(t,null),k(t,n),k(t,r),k(t,o),k(t,i),k(t,s),l&&l.m(t,null),a=!0},p(e,[o]){e[1]?c?(c.p(e,o),2&o&&oe(c,1)):(c=ut(),c.c(),oe(c,1),c.m(t,n)):c&&(ne(),ie(c,1,1,(()=>{c=null})),re()),(!a||1&o)&&I(r,e[0]),e[2]?l?(l.p(e,o),4&o&&oe(l,1)):(l=ft(e),l.c(),oe(l,1),l.m(t,null)):l&&(ne(),ie(l,1,1,(()=>{l=null})),re())},i(e){a||(oe(c),oe(l),a=!0)},o(e){ie(c),ie(l),a=!1},d(e){e&&O(t),c&&c.d(),l&&l.d()}}}function pt(e,t,n){let{title:r,back:o,search:i}=t;return e.$$set=e=>{"title"in e&&n(0,r=e.title),"back"in e&&n(1,o=e.back),"search"in e&&n(2,i=e.search)},[r,o,i]}const ht=class extends de{constructor(e){super(),fe(this,e,pt,dt,h,{title:0,back:1,search:2},lt)}},mt=[];function gt(e,t){return{subscribe:yt(e,t).subscribe}}function yt(e,t=c){let n;const r=new Set;function o(t){if(h(e,t)&&(e=t,n)){const t=!mt.length;for(const t of r)t[1](),mt.push(t,e);if(t){for(let e=0;e<mt.length;e+=2)mt[e][0](mt[e+1]);mt.length=0}}}return{set:o,update:function(t){o(t(e))},subscribe:function(i,s=c){const a=[i,s];return r.add(a),1===r.size&&(n=t(o)||c),i(e),()=>{r.delete(a),0===r.size&&(n(),n=null)}}}}function vt(e,t,n){const r=!Array.isArray(e),o=r?[e]:e,i=t.length<2;return gt(n,(e=>{let n=!1;const s=[];let a=0,l=c;const u=()=>{if(a)return;l();const n=t(r?s[0]:s,e);i?e(n):l=p(n)?n:c},f=o.map(((e,t)=>v(e,(e=>{s[t]=e,a&=~(1<<t),n&&u()}),(()=>{a|=1<<t}))));return n=!0,u(),function(){d(f),l()}}))}var bt=n(302),wt=n.n(bt);function $t(e,t,n){Object.defineProperty(e,t,{value:n})}function xt(e={},t,n,r="#"){if(t){let t=typeof e,n=(e="function"===t?{$$component:e}:"string"===t?{$$redirect:e}:"object"!==t||null===e?{}:e).$$component;if("function"!=typeof n&&null!=n)throw new Error("Invalid Svelte component")}let o={};for(let t in e)/^\$\$/.test(t)?$t(o,t,e[t]):o[t]=xt(e[t],!0,t,r+t);return t&&($t(o,"$$href",r),$t(o,"$$pathname",n),$t(o,"$$pattern",new(wt())(r)),$t(o,"$$stringify",(e=>o.$$pattern.stringify(e)))),Object.freeze(o)}let Et=yt(),kt=vt(Et,(e=>xt(e)));kt.set=e=>{Et.set(e),delete kt.set};let _t=/(#?[^?]*)?(\?.*)?/;function St(){let e=_t.exec(window.location.hash);return{pathname:e[1]||"#/",querystring:e[2]}}let Ot=gt(St(),(e=>{let t=()=>e(St());return window.addEventListener("hashchange",t),()=>window.removeEventListener("hashchange",t)})),At=vt(Ot,(e=>e.pathname)),Ct=vt(Ot,(e=>e.querystring));function Bt(e,t,n,r=[]){if(n){let n=e.$$pattern.match(t);if(n)return e.$$redirect?(Z(),G).then((()=>{history.replaceState(null,null,"#"+e.$$redirect),window.dispatchEvent(new Event("hashchange"))})):{active:e,params:n,matches:r}}for(let n of Object.values(e)){let e=Bt(n,t,!0,[...r,n]);if(e)return e}}vt(Ct,(e=>Array.from(new URLSearchParams(e)).reduce(((e,[t,n])=>(e[t]=n,e)),{})));let jt=vt([kt,At],(([e,t])=>Bt(e,t)||{})),Pt=(vt(jt,(e=>e.active||{})),vt(jt,(e=>e.params||{}))),Tt=vt(jt,(e=>e.matches||[])),Nt=vt(Tt,(e=>e.map((e=>e.$$component)).filter((e=>e))));function Mt(e){let t,n,r;const o=[e[2]];var i=e[0][e[1]];function s(e){let t={};for(let e=0;e<o.length;e+=1)t=l(t,o[e]);return{props:t}}return i&&(t=new i(s())),{c(){t&&ce(t.$$.fragment),n=T()},m(e,o){t&&le(t,e,o),S(e,n,o),r=!0},p(e,[r]){const a=4&r?se(o,[ae(e[2])]):{};if(i!==(i=e[0][e[1]])){if(t){ne();const e=t;ie(e.$$.fragment,1,0,(()=>{ue(e,1)})),re()}i?(t=new i(s()),ce(t.$$.fragment),oe(t.$$.fragment,1),le(t,n.parentNode,n)):t=null}else i&&t.$set(a)},i(e){r||(t&&oe(t.$$.fragment,e),r=!0)},o(e){t&&ie(t.$$.fragment,e),r=!1},d(e){e&&O(n),t&&ue(t,e)}}}let It=0;function Rt(e,t,n){let r;b(e,Nt,(e=>n(0,r=e)));let o=It++;return L((()=>It--)),e.$$set=e=>{n(2,t=l(l({},t),$(e)))},t=$(t),[r,o,t]}function zt(e){let t,n,r,o,i,s,a,c,l,u,f,d,p,h,m,y,v,b,w,$,x,E,_;return n=new ht({props:{title:e[1].title,back:!0}}),b=new De({props:{icon:Qe,text:"Play",active:0===e[0]}}),$=new De({props:{icon:Ve,text:"Download",active:1===e[0]}}),E=new De({props:{icon:et,text:"Add to watchlist",active:2===e[0]}}),{c(){t=C("div"),ce(n.$$.fragment),r=P(),o=C("div"),i=C("img"),a=P(),c=C("h3"),c.textContent=`${e[1].genres.map(e[4]).join(" • ")}`,l=P(),u=C("h3"),u.textContent=`${e[1].overview}`,f=P(),d=C("h3"),d.textContent=`${e[3]}`,p=P(),h=C("div"),m=P(),y=C("div"),v=C("a"),ce(b.$$.fragment),w=P(),ce($.$$.fragment),x=P(),ce(E.$$.fragment),g(i.src,s="posters/movies/"+e[1].id)||M(i,"src",s),M(i,"alt","Poster"),M(i,"class","float-left mr-4"),M(c,"class","text-3xl mb-8"),M(u,"class","text-4xl"),M(d,"class","text-3xl mt-8"),M(o,"class","min-h-[450px] mt-4"),M(h,"class","grow"),M(v,"href",e[2]),M(y,"class","flex justify-around mb-16"),M(t,"class","h-screen px-48 bg-white flex flex-col")},m(e,s){S(e,t,s),le(n,t,null),k(t,r),k(t,o),k(o,i),k(o,a),k(o,c),k(o,l),k(o,u),k(o,f),k(o,d),k(t,p),k(t,h),k(t,m),k(t,y),k(y,v),le(b,v,null),k(y,w),le($,y,null),k(y,x),le(E,y,null),_=!0},p(e,[t]){const n={};1&t&&(n.active=0===e[0]),b.$set(n);const r={};1&t&&(r.active=1===e[0]),$.$set(r);const o={};1&t&&(o.active=2===e[0]),E.$set(o)},i(e){_||(oe(n.$$.fragment,e),oe(b.$$.fragment,e),oe($.$$.fragment,e),oe(E.$$.fragment,e),_=!0)},o(e){ie(n.$$.fragment,e),ie(b.$$.fragment,e),ie($.$$.fragment,e),ie(E.$$.fragment,e),_=!1},d(e){e&&O(t),ue(n),ue(b),ue($),ue(E)}}}function Ft(e,t,n){let r;b(e,Pt,(e=>n(5,r=e)));const s=o[r.id];console.log(s);const a=`#/search/${escape(s.title).replace(/\./g,"%2E")}`;let c=0;const l=new Date(s.released).toLocaleDateString(void 0,{day:"numeric",month:"long",year:"numeric"});function u(e){switch(e){case"A":0===c&&(location.href=a);break;case"B":history.back();break;case"left":c>0&&n(0,c--,c);break;case"right":c<2&&n(0,c++,c)}}return Te(u),L((()=>{Ne(u)})),[c,s,a,l,e=>i[e]]}class Lt{name=null;titles=[];activeCol=0;constructor(e){this.name=e}}function Ut(e){_(e,"svelte-14n1dx9",".poster.active.svelte-14n1dx9,.poster.svelte-14n1dx9:hover{border-color:black}.clamp-3.svelte-14n1dx9{display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical}")}function Dt(e,t,n){const r=e.slice();return r[5]=t[n],r[7]=n,r}function qt(e,t,n){const r=e.slice();return r[8]=t[n],r[10]=n,r}function Ht(e){let t,n,r,o,i,s=e[2].genres.map(e[3]).join(" • ")+"",a=e[2].overview+"";return{c(){t=C("h3"),n=j(s),r=P(),o=C("div"),i=j(a),M(t,"class","text-xl mb-2"),M(o,"class","text-3xl text-ellipsis overflow-hidden grow clamp-3 svelte-14n1dx9")},m(e,s){S(e,t,s),k(t,n),S(e,r,s),S(e,o,s),k(o,i)},p(e,t){4&t&&s!==(s=e[2].genres.map(e[3]).join(" • ")+"")&&I(n,s),4&t&&a!==(a=e[2].overview+"")&&I(i,a)},d(e){e&&O(t),e&&O(r),e&&O(o)}}}function Gt(e){let t,n,r,o,i,s;return{c(){t=C("a"),n=C("img"),g(n.src,r="posters/movies/"+e[8].id)||M(n,"src",r),M(n,"alt",o=e[8].title),M(t,"key",i=e[8].id),M(t,"href",s="#/movies/details/"+e[8].id),M(t,"class","poster shrink-0 w-[15rem] border-8 border-transparent rounded-lg svelte-14n1dx9"),z(t,"active",0===e[7]&&0===e[10])},m(e,r){S(e,t,r),k(t,n)},p(e,a){3&a&&!g(n.src,r="posters/movies/"+e[8].id)&&M(n,"src",r),3&a&&o!==(o=e[8].title)&&M(n,"alt",o),3&a&&i!==(i=e[8].id)&&M(t,"key",i),3&a&&s!==(s="#/movies/details/"+e[8].id)&&M(t,"href",s)},d(e){e&&O(t)}}}function Vt(e){let t,n,r,o,i,s=e[5].name+"",a=e[5].titles.concat(e[5].titles.slice(0,Yt)).slice(e[5].activeCol,e[5].activeCol+Yt),c=[];for(let t=0;t<a.length;t+=1)c[t]=Gt(qt(e,a,t));return{c(){t=C("h2"),n=j(s),r=P(),o=C("div");for(let e=0;e<c.length;e+=1)c[e].c();i=P(),M(t,"class","text-7xl mb-4"),M(o,"class","flex justify-between mb-8")},m(e,s){S(e,t,s),k(t,n),S(e,r,s),S(e,o,s);for(let e=0;e<c.length;e+=1)c[e].m(o,null);k(o,i)},p(e,t){if(3&t&&s!==(s=e[5].name+"")&&I(n,s),3&t){let n;for(a=e[5].titles.concat(e[5].titles.slice(0,Yt)).slice(e[5].activeCol,e[5].activeCol+Yt),n=0;n<a.length;n+=1){const r=qt(e,a,n);c[n]?c[n].p(r,t):(c[n]=Gt(r),c[n].c(),c[n].m(o,i))}for(;n<c.length;n+=1)c[n].d(1);c.length=a.length}},d(e){e&&O(t),e&&O(r),e&&O(o),A(c,e)}}}function Zt(e){let t,n,r,o,i,s;n=new ht({props:{title:"Movies",back:!0,search:"/movies/search"}});let a=e[2]&&Ht(e),c=e[0].concat(e[0][0]).slice(e[1],e[1]+2),l=[];for(let t=0;t<c.length;t+=1)l[t]=Vt(Dt(e,c,t));return{c(){t=C("div"),ce(n.$$.fragment),r=P(),o=C("div"),a&&a.c(),i=P();for(let e=0;e<l.length;e+=1)l[e].c();M(o,"class","h-[9rem] flex flex-col mb-2"),M(t,"class","h-screen px-48 bg-white")},m(e,c){S(e,t,c),le(n,t,null),k(t,r),k(t,o),a&&a.m(o,null),k(t,i);for(let e=0;e<l.length;e+=1)l[e].m(t,null);s=!0},p(e,[n]){if(e[2]?a?a.p(e,n):(a=Ht(e),a.c(),a.m(o,null)):a&&(a.d(1),a=null),3&n){let r;for(c=e[0].concat(e[0][0]).slice(e[1],e[1]+2),r=0;r<c.length;r+=1){const o=Dt(e,c,r);l[r]?l[r].p(o,n):(l[r]=Vt(o),l[r].c(),l[r].m(t,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=c.length}},i(e){s||(oe(n.$$.fragment,e),s=!0)},o(e){ie(n.$$.fragment,e),s=!1},d(e){e&&O(t),ue(n),a&&a.d(),A(l,e)}}}const Yt=6;function Kt(e,t,n){let r;const o=[new Lt("Trending"),new Lt("Top rated")];let c=0;function l(e){const t=o[c],r=t.titles[t.activeCol];switch(e){case"A":location.hash=`#/movies/details/${r.id}`;break;case"B":history.back();break;case"up":n(1,c=(o.length+c-1)%o.length);break;case"down":n(1,c=(o.length+c+1)%o.length);break;case"left":t.activeCol=(t.titles.length+t.activeCol-1)%t.titles.length,n(0,o);break;case"right":t.activeCol=(t.titles.length+t.activeCol+1)%t.titles.length,n(0,o)}}return s().then((e=>{n(0,o[0].titles=e,o)})),a().then((e=>{n(0,o[1].titles=e,o)})),Te(l),L((()=>{Ne(l)})),e.$$.update=()=>{3&e.$$.dirty&&n(2,r=o[c].titles[o[c].activeCol])},[o,c,r,e=>i[e]]}const Qt=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],Wt=["B","kiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],Xt=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],Jt=["b","kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],en=(e,t,n)=>{let r=e;return"string"==typeof t||Array.isArray(t)?r=e.toLocaleString(t,n):!0!==t&&void 0===n||(r=e.toLocaleString(void 0,n)),r};function tn(e,t){if(!Number.isFinite(e))throw new TypeError(`Expected a finite number, got ${typeof e}: ${e}`);const n=(t={bits:!1,binary:!1,...t}).bits?t.binary?Jt:Xt:t.binary?Wt:Qt;if(t.signed&&0===e)return` 0 ${n[0]}`;const r=e<0,o=r?"-":t.signed?"+":"";let i;if(r&&(e=-e),void 0!==t.minimumFractionDigits&&(i={minimumFractionDigits:t.minimumFractionDigits}),void 0!==t.maximumFractionDigits&&(i={maximumFractionDigits:t.maximumFractionDigits,...i}),e<1)return o+en(e,t.locale,i)+" "+n[0];const s=Math.min(Math.floor(t.binary?Math.log(e)/Math.log(1024):Math.log10(e)/3),n.length-1);return e/=(t.binary?1024:1e3)**s,i||(e=e.toPrecision(3)),o+en(Number(e),t.locale,i)+" "+n[s]}function nn(e){_(e,"svelte-1vclic6",'.circle.svelte-1vclic6{width:var(--size);height:var(--size);box-sizing:border-box;position:relative;border:3px solid transparent;border-top-color:var(--colorOuter);border-radius:50%;animation:svelte-1vclic6-circleSpin var(--durationOuter) linear infinite}.circle.svelte-1vclic6:before,.circle.svelte-1vclic6:after{content:"";box-sizing:border-box;position:absolute;border:3px solid transparent;border-radius:50%}.circle.svelte-1vclic6:after{border-top-color:var(--colorInner);top:9px;left:9px;right:9px;bottom:9px;animation:svelte-1vclic6-circleSpin var(--durationInner) linear infinite}.circle.svelte-1vclic6:before{border-top-color:var(--colorCenter);top:3px;left:3px;right:3px;bottom:3px;animation:svelte-1vclic6-circleSpin var(--durationCenter) linear infinite}@keyframes svelte-1vclic6-circleSpin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}')}function rn(e){let t;return{c(){t=C("div"),M(t,"class","circle svelte-1vclic6"),R(t,"--size",e[0]+e[1]),R(t,"--colorInner",e[4]),R(t,"--colorCenter",e[3]),R(t,"--colorOuter",e[2]),R(t,"--durationInner",e[6]),R(t,"--durationCenter",e[7]),R(t,"--durationOuter",e[5])},m(e,n){S(e,t,n)},p(e,[n]){3&n&&R(t,"--size",e[0]+e[1]),16&n&&R(t,"--colorInner",e[4]),8&n&&R(t,"--colorCenter",e[3]),4&n&&R(t,"--colorOuter",e[2]),64&n&&R(t,"--durationInner",e[6]),128&n&&R(t,"--durationCenter",e[7]),32&n&&R(t,"--durationOuter",e[5])},i:c,o:c,d(e){e&&O(t)}}}function on(e,t,n){let{size:r="60"}=t,{unit:o="px"}=t,{colorOuter:i="#FF3E00"}=t,{colorCenter:s="#40B3FF"}=t,{colorInner:a="#676778"}=t,{durationMultiplier:c=1}=t,{durationOuter:l=2*c+"s"}=t,{durationInner:u=1.5*c+"s"}=t,{durationCenter:f=3*c+"s"}=t;return e.$$set=e=>{"size"in e&&n(0,r=e.size),"unit"in e&&n(1,o=e.unit),"colorOuter"in e&&n(2,i=e.colorOuter),"colorCenter"in e&&n(3,s=e.colorCenter),"colorInner"in e&&n(4,a=e.colorInner),"durationMultiplier"in e&&n(8,c=e.durationMultiplier),"durationOuter"in e&&n(5,l=e.durationOuter),"durationInner"in e&&n(6,u=e.durationInner),"durationCenter"in e&&n(7,f=e.durationCenter)},[r,o,i,s,a,l,u,f,c]}const sn=class extends de{constructor(e){super(),fe(this,e,on,rn,h,{size:0,unit:1,colorOuter:2,colorCenter:3,colorInner:4,durationMultiplier:8,durationOuter:5,durationInner:6,durationCenter:7},nn)}},an=require("child_process");var cn=n.n(an);function ln(e){_(e,"svelte-7uyn0n",".source.active.svelte-7uyn0n,.source.svelte-7uyn0n:hover{border-color:black !important}")}function un(e,t,n){const r=e.slice();return r[7]=t[n],r[9]=n,r}function fn(e){let t,n,r;return n=new sn({props:{size:256}}),{c(){t=C("div"),ce(n.$$.fragment),M(t,"class","flex justify-center items-center h-full")},m(e,o){S(e,t,o),le(n,t,null),r=!0},p:c,i(e){r||(oe(n.$$.fragment,e),r=!0)},o(e){ie(n.$$.fragment,e),r=!1},d(e){e&&O(t),ue(n)}}}function dn(e){let t,n=e[0].slice(e[1]),r=[];for(let t=0;t<n.length;t+=1)r[t]=pn(un(e,n,t));return{c(){t=C("div");for(let e=0;e<r.length;e+=1)r[e].c();M(t,"class","flex gap-8 flex-col text-2xl")},m(e,n){S(e,t,n);for(let e=0;e<r.length;e+=1)r[e].m(t,null)},p(e,o){if(11&o){let i;for(n=e[0].slice(e[1]),i=0;i<n.length;i+=1){const s=un(e,n,i);r[i]?r[i].p(s,o):(r[i]=pn(s),r[i].c(),r[i].m(t,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=n.length}},i:c,o:c,d(e){e&&O(t),A(r,e)}}}function pn(e){let t,n,r,o,i,s,a,c,l,u,f,d,p,h=e[7].name+"",m=`${e[7].seeders}|${e[7].leechers}`,g=tn(Number(e[7].size))+"";function y(){return e[4](e[7])}return{c(){t=C("div"),n=j(h),r=P(),o=C("div"),i=P(),s=j(m),a=P(),c=j(" • "),l=P(),u=j(g),f=P(),M(o,"class","grow"),M(t,"class","source rounded-lg bg-slate-200 border-4 border-transparent p-4 flex cursor-pointer drop-shadow-sm svelte-7uyn0n"),z(t,"active",0===e[9])},m(e,h){S(e,t,h),k(t,n),k(t,r),k(t,o),k(t,i),k(t,s),k(t,a),k(t,c),k(t,l),k(t,u),k(t,f),d||(p=N(t,"click",y),d=!0)},p(t,r){e=t,3&r&&h!==(h=e[7].name+"")&&I(n,h),3&r&&m!==(m=`${e[7].seeders}|${e[7].leechers}`)&&I(s,m),3&r&&g!==(g=tn(Number(e[7].size))+"")&&I(u,g)},d(e){e&&O(t),d=!1,p()}}}function hn(e){let t,n,r,o,i,s;n=new ht({props:{title:e[2],back:!0}});const a=[dn,fn],c=[];function l(e,t){return e[0].length?0:1}return o=l(e),i=c[o]=a[o](e),{c(){t=C("div"),ce(n.$$.fragment),r=P(),i.c(),M(t,"class","h-screen px-48 bg-white flex flex-col")},m(e,i){S(e,t,i),le(n,t,null),k(t,r),c[o].m(t,null),s=!0},p(e,[n]){let r=o;o=l(e),o===r?c[o].p(e,n):(ne(),ie(c[r],1,1,(()=>{c[r]=null})),re(),i=c[o],i?i.p(e,n):(i=c[o]=a[o](e),i.c()),oe(i,1),i.m(t,null))},i(e){s||(oe(n.$$.fragment,e),oe(i),s=!0)},o(e){ie(n.$$.fragment,e),ie(i),s=!1},d(e){e&&O(t),ue(n),c[o].d()}}}function mn(e,t,n){let r;b(e,Pt,(e=>n(5,r=e)));const o=unescape(r.query);let i=[];fetch(`https://apibay.org/q.php?q=${encodeURIComponent(o.replace(/['".]/g,""))}&cat=200`).then((e=>{e.json().then((e=>{n(0,i=e)}))}));let s=0;function a(e){n(0,i=[]);const t=`magnet:?xt=urn:btih:${e.info_hash}&dn=${encodeURIComponent(e.name)}&tr=udp%3A%2F%2Ftracker.coppersurfer.tk%3A6969%2Fannounce&tr=udp%3A%2F%2Ftracker.openbittorrent.com%3A6969%2Fannounce&tr=udp%3A%2F%2F9.rarbg.to%3A2710%2Fannounce&tr=udp%3A%2F%2F9.rarbg.me%3A2780%2Fannounce&tr=udp%3A%2F%2F9.rarbg.to%3A2730%2Fannounce&tr=udp%3A%2F%2Ftracker.opentrackr.org%3A1337&tr=http%3A%2F%2Fp4p.arenabg.com%3A1337%2Fannounce&tr=udp%3A%2F%2Ftracker.torrent.eu.org%3A451%2Fannounce&tr=udp%3A%2F%2Ftracker.tiny-vps.com%3A6969%2Fannounce&tr=udp%3A%2F%2Fopen.stealth.si%3A80%2Fannounce`,r=cn().spawn("webtorrent",["download",t,"--mpv"]);for(;;){const e=cn().spawnSync("playerctl",["position"]).stdout.toString();if(console.log(e),Number(e)>.1)break}cn().spawnSync("overlay"),r.kill()}function c(e){if("B"!==e){if(i.length)switch(e){case"A":a(i[s]);break;case"up":s>0&&n(1,s--,s);break;case"down":s<i.length-1&&n(1,s++,s)}}else history.back()}return Te(c),L((()=>{Ne(c)})),[i,s,o,a,e=>a(e)]}kt.set({"/":class extends de{constructor(e){super(),fe(this,e,ze,Re,h,{})}},"/movies":class extends de{constructor(e){super(),fe(this,e,Kt,Zt,h,{},Ut)}},"/movies/details/:id":class extends de{constructor(e){super(),fe(this,e,Ft,zt,h,{})}},"/search/:query":class extends de{constructor(e){super(),fe(this,e,mn,hn,h,{},ln)}}}),new class extends de{constructor(e){super(),fe(this,e,Rt,Mt,h,{})}}({target:document.body})})()})();
//# sourceMappingURL=index.js.map